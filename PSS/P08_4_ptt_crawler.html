

<!DOCTYPE html>


<html >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>P08 HTML Parsing - Crawling PTT &#8212; Programming for Social Scientists</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="../_static/.ipynb_checkpoints/custom-checkpoint.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'PSS/P08_4_ptt_crawler';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="TM01 Tokenization" href="../TM/TM01_tokenization.html" />
    <link rel="prev" title="Scraping cases" href="P08_5_cases.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="None"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Programming for Social Scientists
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Basic Logic</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="P01_counting.html">P01-Counting</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="P01p_counting.html">P01-Practice</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="P02_0_basic.html">P02-Python Basic</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="P02p_basic.html">Practices 02 for Python basic</a></li>
<li class="toctree-l2"><a class="reference internal" href="P02_2_exceptions.html">Exceptions(Errors) Handling</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="P03_list_dictionary.html">P03-List and Dictionary</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="P03p.html">P03 Practice: Accessing dict and list</a></li>

<li class="toctree-l2"><a class="reference internal" href="P03p_ans.html">P03 Practice: Accessing dict and list</a></li>

</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="P04_for.html">P04 Flow Control</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="P04p1_for.html">P04 Practice01: for loop</a></li>
<li class="toctree-l2"><a class="reference internal" href="P04p2_search_maximum.html">P04 Practice02 Search &amp; Maximum</a></li>
<li class="toctree-l2"><a class="reference internal" href="P04p3_twitter_users.html">P04 Practice03 Twitter Users</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Data Exploration</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="P05_read_csv_json.html">P05 READ Files</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="P05p1_read_csv.html">P05-1 Read CSV</a></li>
<li class="toctree-l2"><a class="reference internal" href="P05p2_read_json.html">P05-2 Load and dump ubike json data</a></li>
<li class="toctree-l2"><a class="reference internal" href="P05p3_read_other_format.html">Read more formats</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="P06_pandas.html">P06 Pandas</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="P06p1_summarizing.html">Pandas: Counting and Summarizing</a></li>
<li class="toctree-l2"><a class="reference internal" href="P06p2_filter_select_datetime.html">Pandas: filter, select, and timeline process</a></li>
<li class="toctree-l2"><a class="reference internal" href="P06p3_timestamp.html">P06-3 Processing timestamp</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="P07_0_visualization.html">P07 Visualization</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="P07_1_plot_pandas.html">Making Charts with Pandas</a></li>
<li class="toctree-l2"><a class="reference internal" href="P07_2_bokeh.html">Bokeh &amp; Seaborn(Vaccinating)</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Data Acquisition</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="P08_0_scraper.html">P08 Web Crawler</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="P08_1_web_json.html">Web API: cnyes &amp; 104.com</a></li>
<li class="toctree-l2"><a class="reference internal" href="P08_2_twitter_api.html">Twitter API</a></li>
<li class="toctree-l2"><a class="reference internal" href="P08_3%20tweepy.html">Tweepy for twitter API 2.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="P08_5_cases.html">Scraping cases</a></li>
</ul>
</li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">P08 HTML Parsing - Crawling PTT</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Text Mining</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../TM/TM01_tokenization.html">TM01 Tokenization</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-9"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../TM/TM01_tokenization%28chi%29.html">Chinese Processing</a></li>





</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../TM/TM02_collocation.html">TM02 Collocation</a></li>

<li class="toctree-l1"><a class="reference internal" href="../TM/TM03_POS%20Tagging.html">TM03 POS Tagging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TM/TM04_IR_search.html">TM04 Feature Selection &amp; IR &amp; Search</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TM/TM05_sentiment.html">TM05 Sentiment analysis</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Machine Learning</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../TM/TM06_Clustering.html">TM06 Clustering</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TM/TM07_embedding_clustering.html">TM07 embedding and clustering</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TM/TM07_2_doc2vec.html">TM07 word2vec vs doc2vec</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TM/TM08_doc_classification.html">TM08 Classification</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Using deep learning</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference external" href="https://colab.research.google.com/drive/1pXfdPEQDY5wDhlzjr867duFsAVAXj5Yz?usp=sharing">Transformer-Clusteirng</a></li>
<li class="toctree-l1"><a class="reference external" href="https://colab.research.google.com/drive/1YD8mjrpEH6-0rYMY0L1xFFKpJ2jGY6nT?usp=share_link">Transformer-Classification</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Compuational Social Science</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../CSS/CSS01_network_analysis.html">CSS01 Network Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CSS/CSS02_Simulation.html">CSS02 Simulation</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Assignments</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../AS/AS01_basic.html">AS01 for Python Basic</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AS/AS02_ptt_jsonl.html">AS02 Reading PTT data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AS/AS02_ptt_jsonl_ans.html">AS02 Reading PTT data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AS/AS02_list_dict_for_if.html">AS02 List-dict-for-if</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AS/AS03_summarize_ptt.html">AS03: Summarizing Data by Pandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AS/AS03_pandas_summarization.html">AS03 Summarize data with Pandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AS/AS04_vis_twitter_api.html">AS04 Twitter API and Pandas Visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AS/AS05_scraping_youtube.html">AS05 Scraping youtube</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AS/AS05_Scraping_youtube_with_chatGPT.html">AS05. Improving Youtube Scraper with ChatGPT</a></li>




<li class="toctree-l1"><a class="reference external" href="https://drive.google.com/file/d/1L9coxxzKsy7_KzrBWno6Jh9zY785AtJB/view?usp=sharing">AS06 Tokenization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AS/AS06_Tokenization.html">AS06 - Tokenization and keywords</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AS/AS07_collocation.html">AS07 Collocation for finding enthusiastic commentors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AS/AS08_clustering_yt_comment.html">AS08 Youtube comment clustering</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AS/AS08_clustering_people.html">AS08 - Clustering Commenters Based on Behavior</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../Resource/video_list.html">Python教學影片</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Resource/IDEs.html">Python開發環境</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://colab.research.google.com/github/p4css/py4css/blob/master/_sources/PSS/P08_4_ptt_crawler.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onColab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="../_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/p4css/py4css" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="來源儲存庫"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/p4css/py4css/issues/new?title=Issue%20on%20page%20%2FPSS/P08_4_ptt_crawler.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="開啟議題"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="下載此頁面">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/PSS/P08_4_ptt_crawler.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="下載原始檔"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="列印成 PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="全螢幕模式"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>P08 HTML Parsing - Crawling PTT</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> 目錄 </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#i-introduction">I. Introduction</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#get-url-content-by-requests">1.1 Get url content by requests</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#using-chrome-devtools-to-get-right-elements">1.2 Using Chrome DevTools to get right elements</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#parsing-url-content-by-beautifulsoup">1.3 Parsing url content by beautifulsoup</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ii-get-links-from-a-page">II. Get links from a page</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#getting-response">2.1 Getting response</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#converting-webpage-to-a-soup-object">2.2 Converting webpage to a soup object</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#traversing-an-html-file-by-soup">2.3 Traversing an html file by soup</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#finding-all-links-in-the-doc">2.4 Finding all links in the doc</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#extracting-element-content-and-attribute">2.5 Extracting element content and attribute</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#append-links-into-a-list">2.6 <code class="docutils literal notranslate"><span class="pre">append()</span></code> links into a list</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#iii-get-article-links-from-the-first-page">III. Get article links from the first page</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#get-elements-by-a-specific-class">3.1 Get elements by a specific class</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#soup-select-with-css-selector">3.2 <code class="docutils literal notranslate"><span class="pre">soup.select()</span></code> with CSS selector</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#get-href-of-a">Get <code class="docutils literal notranslate"><span class="pre">href</span></code> of <code class="docutils literal notranslate"><span class="pre">&lt;a&gt;</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#using-try-and-except-to-handle-exception">3.3 Using <code class="docutils literal notranslate"><span class="pre">try</span></code> and <code class="docutils literal notranslate"><span class="pre">except</span></code> to handle exception</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#add-the-prefix-url-to-each-url">3.4 Add the prefix url to each url</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#appending-scraped-urls-to-a-list">3.5 Appending scraped urls to a list</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#iv-get-more-links-from-more-pages">IV. Get more links from more pages</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#get-the-last-page">4.1 Get the last page</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#get-the-last-10-pages">4.2 Get the last 10 pages</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#notes-break-continue-and-pass">Notes: break, continue, and pass</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#v-getting-post-content-for-each-post-link">V. Getting post content for each post link</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#get-metadata">5.1 Get metadata</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#assign-data-to-variables">5.2 Assign data to variables</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#get-all-content">5.3 Get all content</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#save-them-all-to-a-dictionary-and-append-to-a-list">5.4 Save them all to a dictionary and append to a list</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#vi-scraping-comments">VI. Scraping comments</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#vii-saving-data">VII. Saving data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#viii-scraping-with-cookies">VIII. Scraping with Cookies</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-cookies">8.1 Adding cookies</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="p08-html-parsing-crawling-ptt">
<h1>P08 HTML Parsing - Crawling PTT<a class="headerlink" href="#p08-html-parsing-crawling-ptt" title="Permalink to this headline">#</a></h1>
<ul class="simple">
<li><p>Using BeautifulSoup Extract Text without Tags <a class="reference external" href="http://stackoverflow.com/questions/23380171/using-beautifulsoup-extract-text-without-tags">http://stackoverflow.com/questions/23380171/using-beautifulsoup-extract-text-without-tags</a></p></li>
<li><p>Scraper: <a class="reference external" href="https://stackoverflow.com/questions/19687421/difference-between-beautifulsoup-and-scrapy-crawler">comparing beautifulsoup vs. scrapy</a></p></li>
<li><p><a class="reference external" href="https://blog.michaelyin.info/scrapy-tutorial-1-scrapy-vs-beautiful-soup/">comparing beautifulsoup vs. scrapy 2</a></p></li>
</ul>
<section id="i-introduction">
<h2>I. Introduction<a class="headerlink" href="#i-introduction" title="Permalink to this headline">#</a></h2>
<section id="get-url-content-by-requests">
<h3>1.1 Get url content by requests<a class="headerlink" href="#get-url-content-by-requests" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p>Try to get the following links (click and observe them, get them by <code class="docutils literal notranslate"><span class="pre">request.get()</span></code>)</p>
<ul>
<li><p><a class="reference external" href="https://www.ptt.cc/bbs/Boy-Girl/index.html">https://www.ptt.cc/bbs/Boy-Girl/index.html</a></p></li>
<li><p><a class="reference external" href="https://www.ptt.cc/bbs/Gossiping/index.html">https://www.ptt.cc/bbs/Gossiping/index.html</a></p></li>
<li><p><a class="reference external" href="http://ecshweb.pchome.com.tw/search/v3.3/?q=iphone">http://ecshweb.pchome.com.tw/search/v3.3/?q=iphone</a></p></li>
</ul>
</li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://www.ptt.cc/bbs/Boy-Girl/index.html&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">[:</span><span class="mi">500</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/index.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;!DOCTYPE html&gt;
&lt;html&gt;
	&lt;head&gt;
		&lt;meta charset=&quot;utf-8&quot;&gt;
		

&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;

&lt;title&gt;看板 Boy-Girl 文章列表 - 批踢踢實業坊&lt;/title&gt;

&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;//images.ptt.cc/bbs/v2.27/bbs-common.css&quot;&gt;
&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;//images.ptt.cc/bbs/v2.27/bbs-base.css&quot; media=&quot;screen&quot;&gt;
&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;//images.ptt.cc/bbs/v2.27/bbs-custom.css&quot;&gt;
&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;//imag
</pre></div>
</div>
</div>
</div>
</section>
<section id="using-chrome-devtools-to-get-right-elements">
<h3>1.2 Using Chrome DevTools to get right elements<a class="headerlink" href="#using-chrome-devtools-to-get-right-elements" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.google.com/presentation/d/e/2PACX-1vSrIfJQJpr_24wwIjMaTMKiq_xrhZ5n-J26G7xbXC1HIMMKWfMsm6zFWOsX8NxNEN_S46z9PnsASj32/pub?start=false&amp;loop=false&amp;delayms=3000">Slide: Inspecting HTML by Chrome DevTools</a></p></li>
</ul>
</section>
<section id="parsing-url-content-by-beautifulsoup">
<h3>1.3 Parsing url content by beautifulsoup<a class="headerlink" href="#parsing-url-content-by-beautifulsoup" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p>Beautifulsoup4 <a class="reference external" href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/">https://www.crummy.com/software/BeautifulSoup/bs4/doc/</a></p></li>
</ul>
</section>
</section>
<section id="ii-get-links-from-a-page">
<h2>II. Get links from a page<a class="headerlink" href="#ii-get-links-from-a-page" title="Permalink to this headline">#</a></h2>
<section id="getting-response">
<h3>2.1 Getting response<a class="headerlink" href="#getting-response" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://www.ptt.cc/bbs/Boy-Girl/index.html&#39;</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="converting-webpage-to-a-soup-object">
<h3>2.2 Converting webpage to a soup object<a class="headerlink" href="#converting-webpage-to-a-soup-object" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s1">&#39;html.parser&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">soup</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">soup</span><span class="o">.</span><span class="n">prettify</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;bs4.BeautifulSoup&#39;&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
 &lt;head&gt;
  &lt;meta charset=&quot;utf-8&quot;/&gt;
  &lt;meta content=&quot;width=device-width, initial-scale=1&quot; name=&quot;viewport&quot;/&gt;
  &lt;title&gt;
   看板 Boy-Girl 文章列表 - 批踢踢實業坊
  &lt;/title&gt;
  &lt;link href=&quot;//images.ptt.cc/bbs/v2.27/bbs-common.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot;/&gt;
  &lt;link href=&quot;//images.ptt.cc/bbs/v2.27/bbs-base.css&quot; media=&quot;screen&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot;/&gt;
  &lt;link href=&quot;//images.ptt.cc/bbs/v2.27/bbs-custom.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot;/&gt;
  &lt;link href=&quot;//images.ptt.cc/bbs/v2.27/pushstream.css&quot; media=&quot;screen&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot;/&gt;
  &lt;link href=&quot;//images.ptt.cc/bbs/v2.27/bbs-print.css&quot; media=&quot;print&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot;/&gt;
 &lt;/head&gt;
 &lt;body&gt;
  &lt;div id=&quot;topbar-container&quot;&gt;
   &lt;div class=&quot;bbs-content&quot; id=&quot;topbar&quot;&gt;
    &lt;a href=&quot;/bbs/&quot; id=&quot;logo&quot;&gt;
     批踢踢實業坊
    &lt;/a&gt;
    &lt;span&gt;
     ›
    &lt;/span&gt;
    &lt;a class=&quot;board&quot; href=&quot;/bbs/Boy-Girl/index.html&quot;&gt;
     &lt;span class=&quot;board-label&quot;&gt;
      看板
     &lt;/span&gt;
     Boy-Girl
    &lt;/a&gt;
    &lt;a class=&quot;right small&quot; href=&quot;/about.html&quot;&gt;
     關於我們
    &lt;/a&gt;
    &lt;a class=&quot;right small&quot; href=&quot;/contact.html&quot;&gt;
     聯絡資訊
    &lt;/a&gt;
   &lt;/div&gt;
  &lt;/div&gt;
  &lt;div id=&quot;main-container&quot;&gt;
   &lt;div id=&quot;action-bar-container&quot;&gt;
    &lt;div class=&quot;action-bar&quot;&gt;
     &lt;div class=&quot;btn-group btn-group-dir&quot;&gt;
      &lt;a class=&quot;btn selected&quot; href=&quot;/bbs/Boy-Girl/index.html&quot;&gt;
       看板
      &lt;/a&gt;
      &lt;a class=&quot;btn&quot; href=&quot;/man/Boy-Girl/index.html&quot;&gt;
       精華區
      &lt;/a&gt;
     &lt;/div&gt;
     &lt;div class=&quot;btn-group btn-group-paging&quot;&gt;
      &lt;a class=&quot;btn wide&quot; href=&quot;/bbs/Boy-Girl/index1.html&quot;&gt;
       最舊
      &lt;/a&gt;
      &lt;a class=&quot;btn wide&quot; href=&quot;/bbs/Boy-Girl/index6233.html&quot;&gt;
       ‹ 上頁
      &lt;/a&gt;
      &lt;a class=&quot;btn wide disabled&quot;&gt;
       下頁 ›
      &lt;/a&gt;
      &lt;a class=&quot;btn wide&quot; href=&quot;/bbs/Boy-Girl/index.html&quot;&gt;
       最新
      &lt;/a&gt;
     &lt;/div&gt;
    &lt;/div&gt;
   &lt;/div&gt;
   &lt;div class=&quot;r-list-container action-bar-margin bbs-screen&quot;&gt;
    &lt;div class=&quot;search-bar&quot;&gt;
     &lt;form action=&quot;search&quot; id=&quot;search-bar&quot; type=&quot;get&quot;&gt;
      &lt;input class=&quot;query&quot; name=&quot;q&quot; placeholder=&quot;搜尋文章⋯&quot; type=&quot;text&quot; value=&quot;&quot;/&gt;
     &lt;/form&gt;
    &lt;/div&gt;
    &lt;div class=&quot;r-ent&quot;&gt;
     &lt;div class=&quot;nrec&quot;&gt;
      &lt;span class=&quot;hl f2&quot;&gt;
       5
      &lt;/span&gt;
     &lt;/div&gt;
     &lt;div class=&quot;title&quot;&gt;
      &lt;a href=&quot;/bbs/Boy-Girl/M.1701479581.A.5D9.html&quot;&gt;
       [新聞] 雲林縣府扮紅娘 主辦單身聯誼活動報名逾3
      &lt;/a&gt;
     &lt;/div&gt;
     &lt;div class=&quot;meta&quot;&gt;
      &lt;div class=&quot;author&quot;&gt;
       yokann
      &lt;/div&gt;
      &lt;div class=&quot;article-menu&quot;&gt;
       &lt;div class=&quot;trigger&quot;&gt;
        ⋯
       &lt;/div&gt;
       &lt;div class=&quot;dropdown&quot;&gt;
        &lt;div class=&quot;item&quot;&gt;
         &lt;a href=&quot;/bbs/Boy-Girl/search?q=thread%3A%5B%E6%96%B0%E8%81%9E%5D+%E9%9B%B2%E6%9E%97%E7%B8%A3%E5%BA%9C%E6%89%AE%E7%B4%85%E5%A8%98+%E4%B8%BB%E8%BE%A6%E5%96%AE%E8%BA%AB%E8%81%AF%E8%AA%BC%E6%B4%BB%E5%8B%95%E5%A0%B1%E5%90%8D%E9%80%BE3&quot;&gt;
          搜尋同標題文章
         &lt;/a&gt;
        &lt;/div&gt;
        &lt;div class=&quot;item&quot;&gt;
         &lt;a href=&quot;/bbs/Boy-Girl/search?q=author%3Ayokann&quot;&gt;
          搜尋看板內 yokann 的文章
         &lt;/a&gt;
        &lt;/div&gt;
       &lt;/div&gt;
      &lt;/div&gt;
      &lt;div class=&quot;date&quot;&gt;
       12/02
      &lt;/div&gt;
      &lt;div class=&quot;mark&quot;&gt;
      &lt;/div&gt;
     &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;r-ent&quot;&gt;
     &lt;div class=&quot;nrec&quot;&gt;
     &lt;/div&gt;
     &lt;div class=&quot;title&quot;&gt;
      &lt;a href=&quot;/bbs/Boy-Girl/M.1701494891.A.DA1.html&quot;&gt;
       Re: [心情] 看來是我太天真了...就這樣被詐騙了
      &lt;/a&gt;
     &lt;/div&gt;
     &lt;div class=&quot;meta&quot;&gt;
      &lt;div class=&quot;author&quot;&gt;
       email5656
      &lt;/div&gt;
      &lt;div class=&quot;article-menu&quot;&gt;
       &lt;div class=&quot;trigger&quot;&gt;
        ⋯
       &lt;/div&gt;
       &lt;div class=&quot;dropdown&quot;&gt;
        &lt;div class=&quot;item&quot;&gt;
         &lt;a href=&quot;/bbs/Boy-Girl/search?q=thread%3A%5B%E5%BF%83%E6%83%85%5D+%E7%9C%8B%E4%BE%86%E6%98%AF%E6%88%91%E5%A4%AA%E5%A4%A9%E7%9C%9F%E4%BA%86...%E5%B0%B1%E9%80%99%E6%A8%A3%E8%A2%AB%E8%A9%90%E9%A8%99%E4%BA%86&quot;&gt;
          搜尋同標題文章
         &lt;/a&gt;
        &lt;/div&gt;
        &lt;div class=&quot;item&quot;&gt;
         &lt;a href=&quot;/bbs/Boy-Girl/search?q=author%3Aemail5656&quot;&gt;
          搜尋看板內 email5656 的文章
         &lt;/a&gt;
        &lt;/div&gt;
       &lt;/div&gt;
      &lt;/div&gt;
      &lt;div class=&quot;date&quot;&gt;
       12/02
      &lt;/div&gt;
      &lt;div class=&quot;mark&quot;&gt;
      &lt;/div&gt;
     &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;r-list-sep&quot;&gt;
    &lt;/div&gt;
    &lt;div class=&quot;r-ent&quot;&gt;
     &lt;div class=&quot;nrec&quot;&gt;
      &lt;span class=&quot;hl f2&quot;&gt;
       3
      &lt;/span&gt;
     &lt;/div&gt;
     &lt;div class=&quot;title&quot;&gt;
      &lt;a href=&quot;/bbs/Boy-Girl/M.1685870093.A.F48.html&quot;&gt;
       [板務] 新版版規預定版
      &lt;/a&gt;
     &lt;/div&gt;
     &lt;div class=&quot;meta&quot;&gt;
      &lt;div class=&quot;author&quot;&gt;
       season2011
      &lt;/div&gt;
      &lt;div class=&quot;article-menu&quot;&gt;
       &lt;div class=&quot;trigger&quot;&gt;
        ⋯
       &lt;/div&gt;
       &lt;div class=&quot;dropdown&quot;&gt;
        &lt;div class=&quot;item&quot;&gt;
         &lt;a href=&quot;/bbs/Boy-Girl/search?q=thread%3A%5B%E6%9D%BF%E5%8B%99%5D+%E6%96%B0%E7%89%88%E7%89%88%E8%A6%8F%E9%A0%90%E5%AE%9A%E7%89%88&quot;&gt;
          搜尋同標題文章
         &lt;/a&gt;
        &lt;/div&gt;
        &lt;div class=&quot;item&quot;&gt;
         &lt;a href=&quot;/bbs/Boy-Girl/search?q=author%3Aseason2011&quot;&gt;
          搜尋看板內 season2011 的文章
         &lt;/a&gt;
        &lt;/div&gt;
       &lt;/div&gt;
      &lt;/div&gt;
      &lt;div class=&quot;date&quot;&gt;
       6/04
      &lt;/div&gt;
      &lt;div class=&quot;mark&quot;&gt;
      &lt;/div&gt;
     &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;r-ent&quot;&gt;
     &lt;div class=&quot;nrec&quot;&gt;
      &lt;span class=&quot;hl f3&quot;&gt;
       18
      &lt;/span&gt;
     &lt;/div&gt;
     &lt;div class=&quot;title&quot;&gt;
      &lt;a href=&quot;/bbs/Boy-Girl/M.1686024708.A.F84.html&quot;&gt;
       [公告] 現行不檢舉不處罰 檢舉辦法變更
      &lt;/a&gt;
     &lt;/div&gt;
     &lt;div class=&quot;meta&quot;&gt;
      &lt;div class=&quot;author&quot;&gt;
       season2011
      &lt;/div&gt;
      &lt;div class=&quot;article-menu&quot;&gt;
       &lt;div class=&quot;trigger&quot;&gt;
        ⋯
       &lt;/div&gt;
       &lt;div class=&quot;dropdown&quot;&gt;
        &lt;div class=&quot;item&quot;&gt;
         &lt;a href=&quot;/bbs/Boy-Girl/search?q=thread%3A%5B%E5%85%AC%E5%91%8A%5D+%E7%8F%BE%E8%A1%8C%E4%B8%8D%E6%AA%A2%E8%88%89%E4%B8%8D%E8%99%95%E7%BD%B0+%E6%AA%A2%E8%88%89%E8%BE%A6%E6%B3%95%E8%AE%8A%E6%9B%B4&quot;&gt;
          搜尋同標題文章
         &lt;/a&gt;
        &lt;/div&gt;
        &lt;div class=&quot;item&quot;&gt;
         &lt;a href=&quot;/bbs/Boy-Girl/search?q=author%3Aseason2011&quot;&gt;
          搜尋看板內 season2011 的文章
         &lt;/a&gt;
        &lt;/div&gt;
       &lt;/div&gt;
      &lt;/div&gt;
      &lt;div class=&quot;date&quot;&gt;
       6/06
      &lt;/div&gt;
      &lt;div class=&quot;mark&quot;&gt;
       M
      &lt;/div&gt;
     &lt;/div&gt;
    &lt;/div&gt;
   &lt;/div&gt;
  &lt;/div&gt;
  &lt;script async=&quot;&quot; src=&quot;https://www.googletagmanager.com/gtag/js?id=G-DZ6Y3BY9GW&quot;&gt;
  &lt;/script&gt;
  &lt;script&gt;
   window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag(&#39;js&#39;, new Date());

      gtag(&#39;config&#39;, &#39;G-DZ6Y3BY9GW&#39;);
  &lt;/script&gt;
  &lt;script&gt;
   (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,&#39;script&#39;,&#39;https://www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;);

  ga(&#39;create&#39;, &#39;UA-32365737-1&#39;, {
    cookieDomain: &#39;ptt.cc&#39;,
    legacyCookieDomain: &#39;ptt.cc&#39;
  });
  ga(&#39;send&#39;, &#39;pageview&#39;);
  &lt;/script&gt;
  &lt;script src=&quot;//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js&quot;&gt;
  &lt;/script&gt;
  &lt;script src=&quot;//images.ptt.cc/bbs/v2.27/bbs.js&quot;&gt;
  &lt;/script&gt;
  &lt;script crossorigin=&quot;anonymous&quot; data-cf-beacon=&#39;{&quot;rayId&quot;:&quot;82f1f751dbbcafbe&quot;,&quot;version&quot;:&quot;2023.10.0&quot;,&quot;r&quot;:1,&quot;token&quot;:&quot;515615eb5fab4c9b91a11e9bf529e6cf&quot;,&quot;b&quot;:1}&#39; defer=&quot;&quot; integrity=&quot;sha512-euoFGowhlaLqXsPWQ48qSkBSCFs3DPRyiwVu3FjR96cMPx+Fr+gpWRhIafcHwqwCqWS42RZhIudOvEI+Ckf6MA==&quot; src=&quot;https://static.cloudflareinsights.com/beacon.min.js/v84a3a4012de94ce1a686ba8c167c359c1696973893317&quot;&gt;
  &lt;/script&gt;
 &lt;/body&gt;
&lt;/html&gt;
</pre></div>
</div>
</div>
</div>
</section>
<section id="traversing-an-html-file-by-soup">
<h3>2.3 Traversing an html file by soup<a class="headerlink" href="#traversing-an-html-file-by-soup" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">soup</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">soup</span><span class="o">.</span><span class="n">title</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">soup</span><span class="o">.</span><span class="n">title</span><span class="o">.</span><span class="n">string</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">soup</span><span class="o">.</span><span class="n">title</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;title&gt;看板 Boy-Girl 文章列表 - 批踢踢實業坊&lt;/title&gt;
title
看板 Boy-Girl 文章列表 - 批踢踢實業坊
head
</pre></div>
</div>
</div>
</div>
</section>
<section id="finding-all-links-in-the-doc">
<h3>2.4 Finding all links in the doc<a class="headerlink" href="#finding-all-links-in-the-doc" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)))</span>
<span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)[:</span><span class="mi">5</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;bs4.element.ResultSet&#39;&gt;
22
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&lt;a href=&quot;/bbs/&quot; id=&quot;logo&quot;&gt;批踢踢實業坊&lt;/a&gt;,
 &lt;a class=&quot;board&quot; href=&quot;/bbs/Boy-Girl/index.html&quot;&gt;&lt;span class=&quot;board-label&quot;&gt;看板 &lt;/span&gt;Boy-Girl&lt;/a&gt;,
 &lt;a class=&quot;right small&quot; href=&quot;/about.html&quot;&gt;關於我們&lt;/a&gt;,
 &lt;a class=&quot;right small&quot; href=&quot;/contact.html&quot;&gt;聯絡資訊&lt;/a&gt;,
 &lt;a class=&quot;btn selected&quot; href=&quot;/bbs/Boy-Girl/index.html&quot;&gt;看板&lt;/a&gt;]
</pre></div>
</div>
</div>
</div>
</section>
<section id="extracting-element-content-and-attribute">
<h3>2.5 Extracting element content and attribute<a class="headerlink" href="#extracting-element-content-and-attribute" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">nodes_a</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">nodes_a</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">nodes_a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">nodes_a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;href&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;a href=&quot;/bbs/&quot; id=&quot;logo&quot;&gt;批踢踢實業坊&lt;/a&gt;
批踢踢實業坊
/bbs/
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)[:</span><span class="mi">5</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">link</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;href&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/bbs/
/bbs/Boy-Girl/index.html
/about.html
/contact.html
/bbs/Boy-Girl/index.html
</pre></div>
</div>
</div>
</div>
</section>
<section id="append-links-into-a-list">
<h3>2.6 <code class="docutils literal notranslate"><span class="pre">append()</span></code> links into a list<a class="headerlink" href="#append-links-into-a-list" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">links</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">):</span>
    <span class="n">links</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">link</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;href&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">links</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>22
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="iii-get-article-links-from-the-first-page">
<h2>III. Get article links from the first page<a class="headerlink" href="#iii-get-article-links-from-the-first-page" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>注意這行code的class的寫法<code class="docutils literal notranslate"><span class="pre">for</span> <span class="pre">link</span> <span class="pre">in</span> <span class="pre">soup.find_all(class_</span> <span class="pre">=</span> <span class="pre">&quot;r-ent&quot;):</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">str.strip()</span></code>可以幫你把一個字串前後的空白拿掉。</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">astring</span> <span class="o">=</span> <span class="s2">&quot;     123123   </span><span class="se">\n</span><span class="s2">123123     &quot;</span>
<span class="n">astring</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
<span class="p">[</span><span class="n">out</span><span class="p">]:</span><span class="s2">&quot;123123   </span><span class="se">\n</span><span class="s2">123123&quot;</span>
</pre></div>
</div>
<section id="get-elements-by-a-specific-class">
<h3>3.1 Get elements by a specific class<a class="headerlink" href="#get-elements-by-a-specific-class" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Just re-run this</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://www.ptt.cc/bbs/Boy-Girl/index.html&#39;</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s1">&#39;html.parser&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">div</span> <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">class_</span> <span class="o">=</span> <span class="s2">&quot;r-ent&quot;</span><span class="p">)[:</span><span class="mi">3</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">div</span><span class="o">.</span><span class="n">prettify</span><span class="p">())</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="o">*</span><span class="mi">80</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;div class=&quot;r-ent&quot;&gt;
 &lt;div class=&quot;nrec&quot;&gt;
  &lt;span class=&quot;hl f2&quot;&gt;
   5
  &lt;/span&gt;
 &lt;/div&gt;
 &lt;div class=&quot;title&quot;&gt;
  &lt;a href=&quot;/bbs/Boy-Girl/M.1701479581.A.5D9.html&quot;&gt;
   [新聞] 雲林縣府扮紅娘 主辦單身聯誼活動報名逾3
  &lt;/a&gt;
 &lt;/div&gt;
 &lt;div class=&quot;meta&quot;&gt;
  &lt;div class=&quot;author&quot;&gt;
   yokann
  &lt;/div&gt;
  &lt;div class=&quot;article-menu&quot;&gt;
   &lt;div class=&quot;trigger&quot;&gt;
    ⋯
   &lt;/div&gt;
   &lt;div class=&quot;dropdown&quot;&gt;
    &lt;div class=&quot;item&quot;&gt;
     &lt;a href=&quot;/bbs/Boy-Girl/search?q=thread%3A%5B%E6%96%B0%E8%81%9E%5D+%E9%9B%B2%E6%9E%97%E7%B8%A3%E5%BA%9C%E6%89%AE%E7%B4%85%E5%A8%98+%E4%B8%BB%E8%BE%A6%E5%96%AE%E8%BA%AB%E8%81%AF%E8%AA%BC%E6%B4%BB%E5%8B%95%E5%A0%B1%E5%90%8D%E9%80%BE3&quot;&gt;
      搜尋同標題文章
     &lt;/a&gt;
    &lt;/div&gt;
    &lt;div class=&quot;item&quot;&gt;
     &lt;a href=&quot;/bbs/Boy-Girl/search?q=author%3Ayokann&quot;&gt;
      搜尋看板內 yokann 的文章
     &lt;/a&gt;
    &lt;/div&gt;
   &lt;/div&gt;
  &lt;/div&gt;
  &lt;div class=&quot;date&quot;&gt;
   12/02
  &lt;/div&gt;
  &lt;div class=&quot;mark&quot;&gt;
  &lt;/div&gt;
 &lt;/div&gt;
&lt;/div&gt;

--------------------------------------------------------------------------------
&lt;div class=&quot;r-ent&quot;&gt;
 &lt;div class=&quot;nrec&quot;&gt;
 &lt;/div&gt;
 &lt;div class=&quot;title&quot;&gt;
  &lt;a href=&quot;/bbs/Boy-Girl/M.1701494891.A.DA1.html&quot;&gt;
   Re: [心情] 看來是我太天真了...就這樣被詐騙了
  &lt;/a&gt;
 &lt;/div&gt;
 &lt;div class=&quot;meta&quot;&gt;
  &lt;div class=&quot;author&quot;&gt;
   email5656
  &lt;/div&gt;
  &lt;div class=&quot;article-menu&quot;&gt;
   &lt;div class=&quot;trigger&quot;&gt;
    ⋯
   &lt;/div&gt;
   &lt;div class=&quot;dropdown&quot;&gt;
    &lt;div class=&quot;item&quot;&gt;
     &lt;a href=&quot;/bbs/Boy-Girl/search?q=thread%3A%5B%E5%BF%83%E6%83%85%5D+%E7%9C%8B%E4%BE%86%E6%98%AF%E6%88%91%E5%A4%AA%E5%A4%A9%E7%9C%9F%E4%BA%86...%E5%B0%B1%E9%80%99%E6%A8%A3%E8%A2%AB%E8%A9%90%E9%A8%99%E4%BA%86&quot;&gt;
      搜尋同標題文章
     &lt;/a&gt;
    &lt;/div&gt;
    &lt;div class=&quot;item&quot;&gt;
     &lt;a href=&quot;/bbs/Boy-Girl/search?q=author%3Aemail5656&quot;&gt;
      搜尋看板內 email5656 的文章
     &lt;/a&gt;
    &lt;/div&gt;
   &lt;/div&gt;
  &lt;/div&gt;
  &lt;div class=&quot;date&quot;&gt;
   12/02
  &lt;/div&gt;
  &lt;div class=&quot;mark&quot;&gt;
  &lt;/div&gt;
 &lt;/div&gt;
&lt;/div&gt;

--------------------------------------------------------------------------------
&lt;div class=&quot;r-ent&quot;&gt;
 &lt;div class=&quot;nrec&quot;&gt;
  &lt;span class=&quot;hl f2&quot;&gt;
   3
  &lt;/span&gt;
 &lt;/div&gt;
 &lt;div class=&quot;title&quot;&gt;
  &lt;a href=&quot;/bbs/Boy-Girl/M.1685870093.A.F48.html&quot;&gt;
   [板務] 新版版規預定版
  &lt;/a&gt;
 &lt;/div&gt;
 &lt;div class=&quot;meta&quot;&gt;
  &lt;div class=&quot;author&quot;&gt;
   season2011
  &lt;/div&gt;
  &lt;div class=&quot;article-menu&quot;&gt;
   &lt;div class=&quot;trigger&quot;&gt;
    ⋯
   &lt;/div&gt;
   &lt;div class=&quot;dropdown&quot;&gt;
    &lt;div class=&quot;item&quot;&gt;
     &lt;a href=&quot;/bbs/Boy-Girl/search?q=thread%3A%5B%E6%9D%BF%E5%8B%99%5D+%E6%96%B0%E7%89%88%E7%89%88%E8%A6%8F%E9%A0%90%E5%AE%9A%E7%89%88&quot;&gt;
      搜尋同標題文章
     &lt;/a&gt;
    &lt;/div&gt;
    &lt;div class=&quot;item&quot;&gt;
     &lt;a href=&quot;/bbs/Boy-Girl/search?q=author%3Aseason2011&quot;&gt;
      搜尋看板內 season2011 的文章
     &lt;/a&gt;
    &lt;/div&gt;
   &lt;/div&gt;
  &lt;/div&gt;
  &lt;div class=&quot;date&quot;&gt;
   6/04
  &lt;/div&gt;
  &lt;div class=&quot;mark&quot;&gt;
  &lt;/div&gt;
 &lt;/div&gt;
&lt;/div&gt;

--------------------------------------------------------------------------------
</pre></div>
</div>
</div>
</div>
<section id="soup-select-with-css-selector">
<h4>3.2 <code class="docutils literal notranslate"><span class="pre">soup.select()</span></code> with CSS selector<a class="headerlink" href="#soup-select-with-css-selector" title="Permalink to this headline">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">div</span> <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;.r-ent&quot;</span><span class="p">)[:</span><span class="mi">10</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">div</span><span class="o">.</span><span class="n">get_text</span><span class="p">(</span><span class="n">strip</span> <span class="o">=</span> <span class="kc">True</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="o">*</span><span class="mi">80</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>5[新聞] 雲林縣府扮紅娘 主辦單身聯誼活動報名逾3yokann⋯搜尋同標題文章搜尋看板內 yokann 的文章12/02
--------------------------------------------------------------------------------
Re: [心情] 看來是我太天真了...就這樣被詐騙了email5656⋯搜尋同標題文章搜尋看板內 email5656 的文章12/02
--------------------------------------------------------------------------------
3[板務] 新版版規預定版season2011⋯搜尋同標題文章搜尋看板內 season2011 的文章6/04
--------------------------------------------------------------------------------
18[公告] 現行不檢舉不處罰 檢舉辦法變更season2011⋯搜尋同標題文章搜尋看板內 season2011 的文章6/06M
--------------------------------------------------------------------------------
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">div</span> <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">class_</span> <span class="o">=</span> <span class="s2">&quot;r-ent&quot;</span><span class="p">)[:</span><span class="mi">10</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">div</span><span class="o">.</span><span class="n">get_text</span><span class="p">(</span><span class="n">strip</span> <span class="o">=</span> <span class="kc">True</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="o">*</span><span class="mi">80</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>5[新聞] 雲林縣府扮紅娘 主辦單身聯誼活動報名逾3yokann⋯搜尋同標題文章搜尋看板內 yokann 的文章12/02
--------------------------------------------------------------------------------
Re: [心情] 看來是我太天真了...就這樣被詐騙了email5656⋯搜尋同標題文章搜尋看板內 email5656 的文章12/02
--------------------------------------------------------------------------------
3[板務] 新版版規預定版season2011⋯搜尋同標題文章搜尋看板內 season2011 的文章6/04
--------------------------------------------------------------------------------
18[公告] 現行不檢舉不處罰 檢舉辦法變更season2011⋯搜尋同標題文章搜尋看板內 season2011 的文章6/06M
--------------------------------------------------------------------------------
</pre></div>
</div>
</div>
</div>
</section>
<section id="get-href-of-a">
<h4>Get <code class="docutils literal notranslate"><span class="pre">href</span></code> of <code class="docutils literal notranslate"><span class="pre">&lt;a&gt;</span></code><a class="headerlink" href="#get-href-of-a" title="Permalink to this headline">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">div</span> <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">class_</span> <span class="o">=</span> <span class="s2">&quot;r-ent&quot;</span><span class="p">)[:</span><span class="mi">5</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">div</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">class_</span><span class="o">=</span><span class="s1">&#39;nrec&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">div</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">class_</span><span class="o">=</span><span class="s1">&#39;date&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">div</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">class_</span><span class="o">=</span><span class="s1">&#39;author&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">div</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">class_</span><span class="o">=</span><span class="s2">&quot;title&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">div</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">class_</span><span class="o">=</span><span class="s1">&#39;title&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s1">&#39;href&#39;</span><span class="p">])</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="o">*</span><span class="mi">80</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>5
12/02
yokann
[新聞] 雲林縣府扮紅娘 主辦單身聯誼活動報名逾3
/bbs/Boy-Girl/M.1701479581.A.5D9.html
--------------------------------------------------------------------------------

12/02
email5656
Re: [心情] 看來是我太天真了...就這樣被詐騙了
/bbs/Boy-Girl/M.1701494891.A.DA1.html
--------------------------------------------------------------------------------
3
6/04
season2011
[板務] 新版版規預定版
/bbs/Boy-Girl/M.1685870093.A.F48.html
--------------------------------------------------------------------------------
18
6/06
season2011
[公告] 現行不檢舉不處罰 檢舉辦法變更
/bbs/Boy-Girl/M.1686024708.A.F84.html
--------------------------------------------------------------------------------
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="using-try-and-except-to-handle-exception">
<h3>3.3 Using <code class="docutils literal notranslate"><span class="pre">try</span></code> and <code class="docutils literal notranslate"><span class="pre">except</span></code> to handle exception<a class="headerlink" href="#using-try-and-except-to-handle-exception" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://www.ptt.cc/bbs/Boy-Girl/index.html&#39;</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">timeout</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s1">&#39;html.parser&#39;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">div</span> <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">class_</span> <span class="o">=</span> <span class="s2">&quot;r-ent&quot;</span><span class="p">)[:</span><span class="mi">3</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">div</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">class_</span><span class="o">=</span><span class="s2">&quot;title&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">div</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">class_</span><span class="o">=</span><span class="s1">&#39;title&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s1">&#39;href&#39;</span><span class="p">])</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The Page was removed&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[新聞] 雲林縣府扮紅娘 主辦單身聯誼活動報名逾3
/bbs/Boy-Girl/M.1701479581.A.5D9.html
Re: [心情] 看來是我太天真了...就這樣被詐騙了
/bbs/Boy-Girl/M.1701494891.A.DA1.html
[板務] 新版版規預定版
/bbs/Boy-Girl/M.1685870093.A.F48.html
</pre></div>
</div>
</div>
</div>
</section>
<section id="add-the-prefix-url-to-each-url">
<h3>3.4 Add the prefix url to each url<a class="headerlink" href="#add-the-prefix-url-to-each-url" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pre</span> <span class="o">=</span> <span class="s1">&#39;https://www.ptt.cc&#39;</span>
<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://www.ptt.cc/bbs/Boy-Girl/index.html&#39;</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s1">&#39;html.parser&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">div</span> <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">class_</span> <span class="o">=</span> <span class="s2">&quot;r-ent&quot;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">div</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">class_</span><span class="o">=</span><span class="s2">&quot;title&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">pre</span> <span class="o">+</span> <span class="n">div</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">class_</span><span class="o">=</span><span class="s1">&#39;title&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s1">&#39;href&#39;</span><span class="p">])</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">pass</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[新聞] 雲林縣府扮紅娘 主辦單身聯誼活動報名逾3
https://www.ptt.cc/bbs/Boy-Girl/M.1701479581.A.5D9.html
Re: [心情] 看來是我太天真了...就這樣被詐騙了
https://www.ptt.cc/bbs/Boy-Girl/M.1701494891.A.DA1.html
[板務] 新版版規預定版
https://www.ptt.cc/bbs/Boy-Girl/M.1685870093.A.F48.html
[公告] 現行不檢舉不處罰 檢舉辦法變更
https://www.ptt.cc/bbs/Boy-Girl/M.1686024708.A.F84.html
</pre></div>
</div>
</div>
</div>
</section>
<section id="appending-scraped-urls-to-a-list">
<h3>3.5 Appending scraped urls to a list<a class="headerlink" href="#appending-scraped-urls-to-a-list" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">links</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">pre</span> <span class="o">=</span> <span class="s1">&#39;https://www.ptt.cc&#39;</span>

<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://www.ptt.cc/bbs/Boy-Girl/index.html&#39;</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s1">&#39;html.parser&#39;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">div</span> <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">class_</span> <span class="o">=</span> <span class="s2">&quot;r-ent&quot;</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">links</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pre</span> <span class="o">+</span> <span class="n">div</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">class_</span><span class="o">=</span><span class="s1">&#39;title&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s1">&#39;href&#39;</span><span class="p">])</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">pass</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">links</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="iv-get-more-links-from-more-pages">
<h2>IV. Get more links from more pages<a class="headerlink" href="#iv-get-more-links-from-more-pages" title="Permalink to this headline">#</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">ptt</span><span class="o">.</span><span class="n">cc</span><span class="o">/</span><span class="n">bbs</span><span class="o">/</span><span class="n">Boy</span><span class="o">-</span><span class="n">Girl</span><span class="o">/</span><span class="n">M</span><span class="mf">.1463279135</span><span class="o">.</span><span class="n">A</span><span class="mf">.825</span><span class="o">.</span><span class="n">html</span>
<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">ptt</span><span class="o">.</span><span class="n">cc</span><span class="o">/</span><span class="n">bbs</span><span class="o">/</span><span class="n">Boy</span><span class="o">-</span><span class="n">Girl</span><span class="o">/</span><span class="n">M</span><span class="mf">.1463280694</span><span class="o">.</span><span class="n">A</span><span class="mf">.659</span><span class="o">.</span><span class="n">html</span>
<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">ptt</span><span class="o">.</span><span class="n">cc</span><span class="o">/</span><span class="n">bbs</span><span class="o">/</span><span class="n">Boy</span><span class="o">-</span><span class="n">Girl</span><span class="o">/</span><span class="n">M</span><span class="mf">.1463280951</span><span class="o">.</span><span class="n">A</span><span class="mf">.42</span><span class="n">C</span><span class="o">.</span><span class="n">html</span>
<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">ptt</span><span class="o">.</span><span class="n">cc</span><span class="o">/</span><span class="n">bbs</span><span class="o">/</span><span class="n">Boy</span><span class="o">-</span><span class="n">Girl</span><span class="o">/</span><span class="n">M</span><span class="mf">.1463281950</span><span class="o">.</span><span class="n">A</span><span class="mf">.094</span><span class="o">.</span><span class="n">html</span>
<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">ptt</span><span class="o">.</span><span class="n">cc</span><span class="o">/</span><span class="n">bbs</span><span class="o">/</span><span class="n">Boy</span><span class="o">-</span><span class="n">Girl</span><span class="o">/</span><span class="n">M</span><span class="mf">.1463281956</span><span class="o">.</span><span class="n">A</span><span class="o">.</span><span class="n">CE1</span><span class="o">.</span><span class="n">html</span>
<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">ptt</span><span class="o">.</span><span class="n">cc</span><span class="o">/</span><span class="n">bbs</span><span class="o">/</span><span class="n">Boy</span><span class="o">-</span><span class="n">Girl</span><span class="o">/</span><span class="n">M</span><span class="mf">.1463286737</span><span class="o">.</span><span class="n">A</span><span class="o">.</span><span class="n">ECC</span><span class="o">.</span><span class="n">html</span>
<span class="o">...</span>
</pre></div>
</div>
<section id="get-the-last-page">
<h3>4.1 Get the last page<a class="headerlink" href="#get-the-last-page" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">re</span>

<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://www.ptt.cc/bbs/Boy-Girl/index.html&#39;</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s1">&#39;html.parser&#39;</span><span class="p">)</span>
<span class="n">last2nd</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">class_</span><span class="o">=</span><span class="s1">&#39;action-bar&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">class_</span><span class="o">=</span><span class="s1">&#39;btn-group-paging&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">class_</span><span class="o">=</span><span class="s1">&#39;btn&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;href&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">last2nd</span><span class="p">)</span>
<span class="n">lastpage</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s2">&quot;index(.+?)\.html&quot;</span><span class="p">,</span> <span class="n">last2nd</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span> <span class="o">+</span> <span class="mi">1</span>
<span class="nb">print</span><span class="p">(</span><span class="n">lastpage</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/bbs/Boy-Girl/index6233.html
6234
</pre></div>
</div>
</div>
</div>
</section>
<section id="get-the-last-10-pages">
<h3>4.2 Get the last 10 pages<a class="headerlink" href="#get-the-last-10-pages" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pre</span> <span class="o">=</span> <span class="s1">&#39;https://www.ptt.cc&#39;</span>
<span class="n">links</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">lastpage</span> <span class="o">=</span> <span class="mi">5303</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">lastpage</span><span class="p">,</span> <span class="n">lastpage</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
    <span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://www.ptt.cc/bbs/Boy-Girl/index</span><span class="si">{}</span><span class="s1">.html&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
    <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s1">&#39;html.parser&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">div</span> <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">class_</span><span class="o">=</span><span class="s1">&#39;r-ent&#39;</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">links</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pre</span> <span class="o">+</span> <span class="n">div</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">class_</span><span class="o">=</span><span class="s1">&#39;title&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s1">&#39;href&#39;</span><span class="p">])</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">links</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>5303 	 20
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>5302 	 40
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>5301 	 60
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>5300 	 80
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>5299 	 100
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>5298 	 120
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>5297 	 140
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>5296 	 160
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>5295 	 180
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>5294 	 200
</pre></div>
</div>
</div>
</div>
</section>
<section id="notes-break-continue-and-pass">
<h3>Notes: break, continue, and pass<a class="headerlink" href="#notes-break-continue-and-pass" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">break</span></code>: 符合條件的時候，就跳出迴圈，別再執行了。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">continue</span></code>: 符合條件的時候，就不要執行這一圈了，接下去執行下一圈</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pass</span></code>: 不做任何事</p></li>
</ul>
</section>
</section>
<section id="v-getting-post-content-for-each-post-link">
<h2>V. Getting post content for each post link<a class="headerlink" href="#v-getting-post-content-for-each-post-link" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>Beautifulsoup has two ways to detect elements and its attributes</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">soup.find()</span></code>, <code class="docutils literal notranslate"><span class="pre">soup.find_all()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">soup.select()</span></code> &lt;– You can input CSS selector by this way</p></li>
</ul>
</li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">links</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>200
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">links</span><span class="p">[:</span><span class="mi">5</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">link</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1623125330.A.383.html
https://www.ptt.cc/bbs/Boy-Girl/M.1623127385.A.3A2.html
https://www.ptt.cc/bbs/Boy-Girl/M.1623140041.A.3BD.html
https://www.ptt.cc/bbs/Boy-Girl/M.1623140183.A.A91.html
https://www.ptt.cc/bbs/Boy-Girl/M.1623145679.A.20E.html
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">links</span><span class="p">[:</span><span class="mi">5</span><span class="p">]:</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">link</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
    <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s1">&#39;html.parser&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">soup</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;bs4.BeautifulSoup&#39;&gt;
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;bs4.BeautifulSoup&#39;&gt;
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;bs4.BeautifulSoup&#39;&gt;
&lt;class &#39;bs4.BeautifulSoup&#39;&gt;
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;bs4.BeautifulSoup&#39;&gt;
</pre></div>
</div>
</div>
</div>
<section id="get-metadata">
<h3>5.1 Get metadata<a class="headerlink" href="#get-metadata" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">links</span><span class="p">[:</span><span class="mi">5</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">link</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">link</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
    <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s2">&quot;html.parser&quot;</span><span class="p">)</span>
    <span class="n">metas</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">class_</span><span class="o">=</span><span class="s1">&#39;article-meta-value&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">metas</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">metas</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">metas</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">metas</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1623125330.A.383.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4
maygood (我本閒人)
Boy-Girl
[求助] 另一半的視訊好友
https://www.ptt.cc/bbs/Boy-Girl/M.1623127385.A.3A2.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4
plutox (網路上的芳鄰)
Boy-Girl
Re: [求助] 男友為了蔡英文跟我大吵 是不是該分
https://www.ptt.cc/bbs/Boy-Girl/M.1623140041.A.3BD.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4
ShaoJi (洨雞)
Boy-Girl
Re: [求助] 男友媽媽的暗示？
https://www.ptt.cc/bbs/Boy-Girl/M.1623140183.A.A91.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4
anitgirl (夏夜雨最好眠)
Boy-Girl
[心情] 我很好騙
https://www.ptt.cc/bbs/Boy-Girl/M.1623145679.A.20E.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4
Lamar7 (歐登)
Boy-Girl
Re: [討論] 請問是我的問題嗎？我能如何改變現況？
</pre></div>
</div>
</div>
</div>
</section>
<section id="assign-data-to-variables">
<h3>5.2 Assign data to variables<a class="headerlink" href="#assign-data-to-variables" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">links</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">link</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">link</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
    <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s2">&quot;html.parser&quot;</span><span class="p">)</span>
    <span class="n">metas</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">class_</span><span class="o">=</span><span class="s1">&#39;article-meta-value&#39;</span><span class="p">)</span>
    <span class="n">author</span> <span class="o">=</span> <span class="n">metas</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">metas</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">text</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="n">metas</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">text</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1623125330.A.383.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1623127385.A.3A2.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1623140041.A.3BD.html
https://www.ptt.cc/bbs/Boy-Girl/M.1623140183.A.A91.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1623145679.A.20E.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1623147881.A.863.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1623153001.A.836.html
https://www.ptt.cc/bbs/Boy-Girl/M.1623155083.A.5AE.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1623157085.A.BC0.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1623160847.A.528.html
https://www.ptt.cc/bbs/Boy-Girl/M.1623161311.A.54B.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1623161623.A.4D9.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1623161681.A.E0F.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1623162759.A.22E.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1623165962.A.8C4.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1623166265.A.6A1.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1623166350.A.E35.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1623166363.A.872.html
https://www.ptt.cc/bbs/Boy-Girl/M.1623170320.A.A59.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1623171489.A.AA5.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622983008.A.C60.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622988124.A.4E6.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622988381.A.38A.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622991875.A.F7D.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622991904.A.D35.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1623003055.A.AEE.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1623008309.A.582.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1623009121.A.A7A.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1623048883.A.27B.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1623058338.A.010.html
https://www.ptt.cc/bbs/Boy-Girl/M.1623065267.A.6CA.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1623073228.A.CD0.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1623074789.A.D46.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1623082169.A.8E4.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1623082320.A.1D6.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1623083600.A.2BD.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1623085683.A.8CD.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1623087951.A.BEB.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1623117373.A.5D5.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1623121979.A.19F.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622866707.A.80B.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622867993.A.986.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622870445.A.C3A.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622870450.A.B95.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622879709.A.930.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622882380.A.B6A.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622884270.A.CCD.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622884350.A.B50.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622891965.A.1AB.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622899534.A.CE3.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622910191.A.FDF.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622912388.A.1CA.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622918533.A.0C5.html
https://www.ptt.cc/bbs/Boy-Girl/M.1622924272.A.1C1.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622948690.A.11F.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622950220.A.67A.html
https://www.ptt.cc/bbs/Boy-Girl/M.1622950809.A.6D0.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622968677.A.91F.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622977749.A.DB2.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622981161.A.517.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622696444.A.B68.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622697132.A.DE5.html
https://www.ptt.cc/bbs/Boy-Girl/M.1622709555.A.2BD.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622714283.A.AD2.html
https://www.ptt.cc/bbs/Boy-Girl/M.1622714724.A.FCF.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622720281.A.B14.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622723587.A.161.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622735422.A.314.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622751403.A.947.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622762628.A.B5C.html
https://www.ptt.cc/bbs/Boy-Girl/M.1622773919.A.E35.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622783381.A.BBB.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622796762.A.06A.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622812088.A.976.html
https://www.ptt.cc/bbs/Boy-Girl/M.1622814489.A.C2D.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622814503.A.D3D.html
https://www.ptt.cc/bbs/Boy-Girl/M.1622835389.A.E7C.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622857273.A.ECA.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622860314.A.7F9.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622864949.A.8A8.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622612508.A.4E7.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622612580.A.71B.html
https://www.ptt.cc/bbs/Boy-Girl/M.1622613446.A.626.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622616103.A.214.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622622411.A.22B.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622624769.A.9F4.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622625176.A.F03.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622630698.A.2E6.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622632259.A.A27.html
https://www.ptt.cc/bbs/Boy-Girl/M.1622633917.A.1C3.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622634362.A.A10.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622641355.A.F85.html
https://www.ptt.cc/bbs/Boy-Girl/M.1622643359.A.64F.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622650690.A.558.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622654782.A.347.html
https://www.ptt.cc/bbs/Boy-Girl/M.1622654940.A.83A.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622669310.A.EFF.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622676089.A.0BF.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622689734.A.E6C.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622690857.A.3EB.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622576230.A.609.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622578591.A.382.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622580219.A.D51.html
https://www.ptt.cc/bbs/Boy-Girl/M.1622580577.A.390.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622591281.A.AA7.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622593631.A.AF1.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622594698.A.F03.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622597281.A.572.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622598562.A.8C4.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622598823.A.ED2.html
https://www.ptt.cc/bbs/Boy-Girl/M.1622598986.A.29A.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622600447.A.9E5.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622600532.A.4B4.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622603907.A.4F2.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622605088.A.6F4.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622605514.A.B81.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622606638.A.2B6.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622608494.A.393.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622608808.A.A75.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622611692.A.E8C.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622491691.A.1EA.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622495430.A.E74.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622501031.A.01E.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622508175.A.CF2.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622514607.A.6C7.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622518294.A.AA6.html
https://www.ptt.cc/bbs/Boy-Girl/M.1622524665.A.524.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622532213.A.C18.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622536262.A.DB9.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622538659.A.DBB.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622539560.A.934.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622545831.A.79E.html
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1622547536.A.199.html
https://www.ptt.cc/bbs/Boy-Girl/M.1622554027.A.794.html
</pre></div>
</div>
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">KeyboardInterrupt</span><span class="g g-Whitespace">                         </span>Traceback (most recent call last)
<span class="nn">Input In [23],</span> in <span class="ni">&lt;cell line: 1&gt;</span><span class="nt">()</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">links</span><span class="p">:</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span>     <span class="nb">print</span><span class="p">(</span><span class="n">link</span><span class="p">)</span>
<span class="ne">----&gt; </span><span class="mi">3</span>     <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">link</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span>     <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s2">&quot;html.parser&quot;</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span>     <span class="n">metas</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">class_</span><span class="o">=</span><span class="s1">&#39;article-meta-value&#39;</span><span class="p">)</span>

<span class="nn">File ~/opt/anaconda3/lib/python3.9/site-packages/requests/api.py:75,</span> in <span class="ni">get</span><span class="nt">(url, params, **kwargs)</span>
<span class="g g-Whitespace">     </span><span class="mi">64</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="g g-Whitespace">     </span><span class="mi">65</span><span class="w">     </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Sends a GET request.</span>
<span class="g g-Whitespace">     </span><span class="mi">66</span><span class="sd"> </span>
<span class="g g-Whitespace">     </span><span class="mi">67</span><span class="sd">     :param url: URL for the new :class:`Request` object.</span>
<span class="sd">   (...)</span>
<span class="g g-Whitespace">     </span><span class="mi">72</span><span class="sd">     :rtype: requests.Response</span>
<span class="g g-Whitespace">     </span><span class="mi">73</span><span class="sd">     &quot;&quot;&quot;</span>
<span class="ne">---&gt; </span><span class="mi">75</span>     <span class="k">return</span> <span class="n">request</span><span class="p">(</span><span class="s1">&#39;get&#39;</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<span class="nn">File ~/opt/anaconda3/lib/python3.9/site-packages/requests/api.py:61,</span> in <span class="ni">request</span><span class="nt">(method, url, **kwargs)</span>
<span class="g g-Whitespace">     </span><span class="mi">57</span> <span class="c1"># By using the &#39;with&#39; statement we are sure the session is closed, thus we</span>
<span class="g g-Whitespace">     </span><span class="mi">58</span> <span class="c1"># avoid leaving sockets open which can trigger a ResourceWarning in some</span>
<span class="g g-Whitespace">     </span><span class="mi">59</span> <span class="c1"># cases, and look like a memory leak in others.</span>
<span class="g g-Whitespace">     </span><span class="mi">60</span> <span class="k">with</span> <span class="n">sessions</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
<span class="ne">---&gt; </span><span class="mi">61</span>     <span class="k">return</span> <span class="n">session</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<span class="nn">File ~/opt/anaconda3/lib/python3.9/site-packages/requests/sessions.py:529,</span> in <span class="ni">Session.request</span><span class="nt">(self, method, url, params, data, headers, cookies, files, auth, timeout, allow_redirects, proxies, hooks, stream, verify, cert, json)</span>
<span class="g g-Whitespace">    </span><span class="mi">524</span> <span class="n">send_kwargs</span> <span class="o">=</span> <span class="p">{</span>
<span class="g g-Whitespace">    </span><span class="mi">525</span>     <span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="n">timeout</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">526</span>     <span class="s1">&#39;allow_redirects&#39;</span><span class="p">:</span> <span class="n">allow_redirects</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">527</span> <span class="p">}</span>
<span class="g g-Whitespace">    </span><span class="mi">528</span> <span class="n">send_kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">settings</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">529</span> <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">prep</span><span class="p">,</span> <span class="o">**</span><span class="n">send_kwargs</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">531</span> <span class="k">return</span> <span class="n">resp</span>

<span class="nn">File ~/opt/anaconda3/lib/python3.9/site-packages/requests/sessions.py:645,</span> in <span class="ni">Session.send</span><span class="nt">(self, request, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">642</span> <span class="n">start</span> <span class="o">=</span> <span class="n">preferred_clock</span><span class="p">()</span>
<span class="g g-Whitespace">    </span><span class="mi">644</span> <span class="c1"># Send the request</span>
<span class="ne">--&gt; </span><span class="mi">645</span> <span class="n">r</span> <span class="o">=</span> <span class="n">adapter</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">647</span> <span class="c1"># Total elapsed time of the request (approximately)</span>
<span class="g g-Whitespace">    </span><span class="mi">648</span> <span class="n">elapsed</span> <span class="o">=</span> <span class="n">preferred_clock</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span>

<span class="nn">File ~/opt/anaconda3/lib/python3.9/site-packages/requests/adapters.py:440,</span> in <span class="ni">HTTPAdapter.send</span><span class="nt">(self, request, stream, timeout, verify, cert, proxies)</span>
<span class="g g-Whitespace">    </span><span class="mi">438</span> <span class="k">try</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">439</span>     <span class="k">if</span> <span class="ow">not</span> <span class="n">chunked</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">440</span>         <span class="n">resp</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">441</span>             <span class="n">method</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">442</span>             <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">443</span>             <span class="n">body</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">444</span>             <span class="n">headers</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">445</span>             <span class="n">redirect</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">446</span>             <span class="n">assert_same_host</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">447</span>             <span class="n">preload_content</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">448</span>             <span class="n">decode_content</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">449</span>             <span class="n">retries</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">max_retries</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">450</span>             <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span>
<span class="g g-Whitespace">    </span><span class="mi">451</span>         <span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">453</span>     <span class="c1"># Send the request.</span>
<span class="g g-Whitespace">    </span><span class="mi">454</span>     <span class="k">else</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">455</span>         <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="s1">&#39;proxy_pool&#39;</span><span class="p">):</span>

<span class="nn">File ~/opt/anaconda3/lib/python3.9/site-packages/urllib3/connectionpool.py:703,</span> in <span class="ni">HTTPConnectionPool.urlopen</span><span class="nt">(self, method, url, body, headers, retries, redirect, assert_same_host, timeout, pool_timeout, release_conn, chunked, body_pos, **response_kw)</span>
<span class="g g-Whitespace">    </span><span class="mi">700</span>     <span class="bp">self</span><span class="o">.</span><span class="n">_prepare_proxy</span><span class="p">(</span><span class="n">conn</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">702</span> <span class="c1"># Make the request on the httplib connection object.</span>
<span class="ne">--&gt; </span><span class="mi">703</span> <span class="n">httplib_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_request</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">704</span>     <span class="n">conn</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">705</span>     <span class="n">method</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">706</span>     <span class="n">url</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">707</span>     <span class="n">timeout</span><span class="o">=</span><span class="n">timeout_obj</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">708</span>     <span class="n">body</span><span class="o">=</span><span class="n">body</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">709</span>     <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">710</span>     <span class="n">chunked</span><span class="o">=</span><span class="n">chunked</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">711</span> <span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">713</span> <span class="c1"># If we&#39;re going to release the connection in ``finally:``, then</span>
<span class="g g-Whitespace">    </span><span class="mi">714</span> <span class="c1"># the response doesn&#39;t need to know about the connection. Otherwise</span>
<span class="g g-Whitespace">    </span><span class="mi">715</span> <span class="c1"># it will also try to release it and we&#39;ll have a double-release</span>
<span class="g g-Whitespace">    </span><span class="mi">716</span> <span class="c1"># mess.</span>
<span class="g g-Whitespace">    </span><span class="mi">717</span> <span class="n">response_conn</span> <span class="o">=</span> <span class="n">conn</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">release_conn</span> <span class="k">else</span> <span class="kc">None</span>

<span class="nn">File ~/opt/anaconda3/lib/python3.9/site-packages/urllib3/connectionpool.py:449,</span> in <span class="ni">HTTPConnectionPool._make_request</span><span class="nt">(self, conn, method, url, timeout, chunked, **httplib_request_kw)</span>
<span class="g g-Whitespace">    </span><span class="mi">444</span>             <span class="n">httplib_response</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">getresponse</span><span class="p">()</span>
<span class="g g-Whitespace">    </span><span class="mi">445</span>         <span class="k">except</span> <span class="ne">BaseException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">446</span>             <span class="c1"># Remove the TypeError from the exception chain in</span>
<span class="g g-Whitespace">    </span><span class="mi">447</span>             <span class="c1"># Python 3 (including for exceptions like SystemExit).</span>
<span class="g g-Whitespace">    </span><span class="mi">448</span>             <span class="c1"># Otherwise it looks like a bug in the code.</span>
<span class="ne">--&gt; </span><span class="mi">449</span>             <span class="n">six</span><span class="o">.</span><span class="n">raise_from</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">450</span> <span class="k">except</span> <span class="p">(</span><span class="n">SocketTimeout</span><span class="p">,</span> <span class="n">BaseSSLError</span><span class="p">,</span> <span class="n">SocketError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">451</span>     <span class="bp">self</span><span class="o">.</span><span class="n">_raise_timeout</span><span class="p">(</span><span class="n">err</span><span class="o">=</span><span class="n">e</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">timeout_value</span><span class="o">=</span><span class="n">read_timeout</span><span class="p">)</span>

<span class="nn">File &lt;string&gt;:3,</span> in <span class="ni">raise_from</span><span class="nt">(value, from_value)</span>

<span class="nn">File ~/opt/anaconda3/lib/python3.9/site-packages/urllib3/connectionpool.py:444,</span> in <span class="ni">HTTPConnectionPool._make_request</span><span class="nt">(self, conn, method, url, timeout, chunked, **httplib_request_kw)</span>
<span class="g g-Whitespace">    </span><span class="mi">441</span> <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">442</span>     <span class="c1"># Python 3</span>
<span class="g g-Whitespace">    </span><span class="mi">443</span>     <span class="k">try</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">444</span>         <span class="n">httplib_response</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">getresponse</span><span class="p">()</span>
<span class="g g-Whitespace">    </span><span class="mi">445</span>     <span class="k">except</span> <span class="ne">BaseException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">446</span>         <span class="c1"># Remove the TypeError from the exception chain in</span>
<span class="g g-Whitespace">    </span><span class="mi">447</span>         <span class="c1"># Python 3 (including for exceptions like SystemExit).</span>
<span class="g g-Whitespace">    </span><span class="mi">448</span>         <span class="c1"># Otherwise it looks like a bug in the code.</span>
<span class="g g-Whitespace">    </span><span class="mi">449</span>         <span class="n">six</span><span class="o">.</span><span class="n">raise_from</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

<span class="nn">File ~/opt/anaconda3/lib/python3.9/http/client.py:1377,</span> in <span class="ni">HTTPConnection.getresponse</span><span class="nt">(self)</span>
<span class="g g-Whitespace">   </span><span class="mi">1375</span> <span class="k">try</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">1376</span>     <span class="k">try</span><span class="p">:</span>
<span class="ne">-&gt; </span><span class="mi">1377</span>         <span class="n">response</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span>
<span class="g g-Whitespace">   </span><span class="mi">1378</span>     <span class="k">except</span> <span class="ne">ConnectionError</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">1379</span>         <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="nn">File ~/opt/anaconda3/lib/python3.9/http/client.py:320,</span> in <span class="ni">HTTPResponse.begin</span><span class="nt">(self)</span>
<span class="g g-Whitespace">    </span><span class="mi">318</span> <span class="c1"># read until we get a non-100 response</span>
<span class="g g-Whitespace">    </span><span class="mi">319</span> <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">320</span>     <span class="n">version</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">reason</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_status</span><span class="p">()</span>
<span class="g g-Whitespace">    </span><span class="mi">321</span>     <span class="k">if</span> <span class="n">status</span> <span class="o">!=</span> <span class="n">CONTINUE</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">322</span>         <span class="k">break</span>

<span class="nn">File ~/opt/anaconda3/lib/python3.9/http/client.py:281,</span> in <span class="ni">HTTPResponse._read_status</span><span class="nt">(self)</span>
<span class="g g-Whitespace">    </span><span class="mi">280</span> <span class="k">def</span> <span class="nf">_read_status</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="ne">--&gt; </span><span class="mi">281</span>     <span class="n">line</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fp</span><span class="o">.</span><span class="n">readline</span><span class="p">(</span><span class="n">_MAXLINE</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="s2">&quot;iso-8859-1&quot;</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">282</span>     <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">_MAXLINE</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">283</span>         <span class="k">raise</span> <span class="n">LineTooLong</span><span class="p">(</span><span class="s2">&quot;status line&quot;</span><span class="p">)</span>

<span class="nn">File ~/opt/anaconda3/lib/python3.9/socket.py:704,</span> in <span class="ni">SocketIO.readinto</span><span class="nt">(self, b)</span>
<span class="g g-Whitespace">    </span><span class="mi">702</span> <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">703</span>     <span class="k">try</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">704</span>         <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sock</span><span class="o">.</span><span class="n">recv_into</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">705</span>     <span class="k">except</span> <span class="n">timeout</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">706</span>         <span class="bp">self</span><span class="o">.</span><span class="n">_timeout_occurred</span> <span class="o">=</span> <span class="kc">True</span>

<span class="nn">File ~/opt/anaconda3/lib/python3.9/ssl.py:1241,</span> in <span class="ni">SSLSocket.recv_into</span><span class="nt">(self, buffer, nbytes, flags)</span>
<span class="g g-Whitespace">   </span><span class="mi">1237</span>     <span class="k">if</span> <span class="n">flags</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">1238</span>         <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<span class="g g-Whitespace">   </span><span class="mi">1239</span>           <span class="s2">&quot;non-zero flags not allowed in calls to recv_into() on </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span>
<span class="g g-Whitespace">   </span><span class="mi">1240</span>           <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">)</span>
<span class="ne">-&gt; </span><span class="mi">1241</span>     <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">buffer</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1242</span> <span class="k">else</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">1243</span>     <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">recv_into</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="n">nbytes</span><span class="p">,</span> <span class="n">flags</span><span class="p">)</span>

<span class="nn">File ~/opt/anaconda3/lib/python3.9/ssl.py:1099,</span> in <span class="ni">SSLSocket.read</span><span class="nt">(self, len, buffer)</span>
<span class="g g-Whitespace">   </span><span class="mi">1097</span> <span class="k">try</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">1098</span>     <span class="k">if</span> <span class="n">buffer</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="ne">-&gt; </span><span class="mi">1099</span>         <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sslobj</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="nb">len</span><span class="p">,</span> <span class="n">buffer</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1100</span>     <span class="k">else</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">1101</span>         <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sslobj</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="nb">len</span><span class="p">)</span>

<span class="ne">KeyboardInterrupt</span>: 
</pre></div>
</div>
</div>
</div>
</section>
<section id="get-all-content">
<h3>5.3 Get all content<a class="headerlink" href="#get-all-content" title="Permalink to this headline">#</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">alist</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">alist</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">))</span>
<span class="p">:</span> <span class="kc">False</span>
</pre></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">NavigableString</span>
<span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">links</span><span class="p">[:</span><span class="mi">3</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">link</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">link</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
    <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s2">&quot;html.parser&quot;</span><span class="p">)</span>
    <span class="n">metas</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">class_</span><span class="o">=</span><span class="s1">&#39;article-meta-value&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">metas</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> 
        <span class="k">continue</span>
    <span class="n">author</span> <span class="o">=</span> <span class="n">metas</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">metas</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">text</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="n">metas</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">text</span>
    
    <span class="n">content</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="k">for</span> <span class="n">text</span> <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;main-content&#39;</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">NavigableString</span><span class="p">):</span>
            <span class="n">content</span> <span class="o">+=</span> <span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">content</span><span class="p">))</span> <span class="c1"># calculating number of words</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1620027067.A.B37.html
421
https://www.ptt.cc/bbs/Boy-Girl/M.1620031172.A.255.html
557
https://www.ptt.cc/bbs/Boy-Girl/M.1620032241.A.610.html
1090
</pre></div>
</div>
</div>
</div>
</section>
<section id="save-them-all-to-a-dictionary-and-append-to-a-list">
<h3>5.4 Save them all to a dictionary and append to a list<a class="headerlink" href="#save-them-all-to-a-dictionary-and-append-to-a-list" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">NavigableString</span>
<span class="n">all_post</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">links</span><span class="p">[:</span><span class="mi">5</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">link</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">link</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
    <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s2">&quot;html.parser&quot;</span><span class="p">)</span>
    <span class="n">metas</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">class_</span><span class="o">=</span><span class="s1">&#39;article-meta-value&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">metas</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> 
        <span class="k">continue</span>
    <span class="n">author</span> <span class="o">=</span> <span class="n">metas</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">metas</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">text</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="n">metas</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">text</span>
    
    <span class="n">content</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="k">for</span> <span class="n">text</span> <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;main-content&#39;</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">NavigableString</span><span class="p">):</span>
            <span class="n">content</span> <span class="o">+=</span> <span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
    
    <span class="n">all_post</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s1">&#39;author&#39;</span><span class="p">:</span><span class="n">author</span><span class="p">,</span> 
                     <span class="s1">&#39;link&#39;</span><span class="p">:</span><span class="n">link</span><span class="p">,</span>
                      <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="n">title</span><span class="p">,</span> 
                      <span class="s1">&#39;timestamp&#39;</span><span class="p">:</span><span class="n">timestamp</span><span class="p">,</span> 
                      <span class="s1">&#39;content&#39;</span><span class="p">:</span><span class="n">content</span><span class="p">})</span> 
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1620027067.A.B37.html
https://www.ptt.cc/bbs/Boy-Girl/M.1620031172.A.255.html
https://www.ptt.cc/bbs/Boy-Girl/M.1620032241.A.610.html
https://www.ptt.cc/bbs/Boy-Girl/M.1620034856.A.1BD.html
https://www.ptt.cc/bbs/Boy-Girl/M.1620039447.A.4AE.html
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">all_post</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>author</th>
      <th>link</th>
      <th>title</th>
      <th>timestamp</th>
      <th>content</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>talkmyself (休息中)</td>
      <td>https://www.ptt.cc/bbs/Boy-Girl/M.1620027067.A...</td>
      <td>Re: [討論] 男生真的會重視女生的付出嗎</td>
      <td>Mon May  3 15:31:03 2021</td>
      <td>你是邏輯有問題嗎?\n男生的付出"只有"金錢? 直接輕描淡寫的帶過\n女生的付出洋洋灑灑長篇...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>ciza (執行力才是主道)</td>
      <td>https://www.ptt.cc/bbs/Boy-Girl/M.1620031172.A...</td>
      <td>Re: [討論] 男生真的會重視女生的付出嗎</td>
      <td>Mon May  3 16:39:29 2021</td>
      <td>不要仇女啦\n\n好女孩可能就只是你還沒遇到而已啦\n\n像我就很感謝我老婆的付出阿\n\n...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>sumade (斬卍凱蒂貓卍佛)</td>
      <td>https://www.ptt.cc/bbs/Boy-Girl/M.1620032241.A...</td>
      <td>Re: [討論] 男生真的會重視女生的付出嗎</td>
      <td>Mon May  3 16:57:19 2021</td>
      <td>看到你推這句  就知道你根本沒把大家的意見聽進去\n\n只覺得自己好可憐  為什麼鄉民都欺負...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>eulbos (心想事成)</td>
      <td>https://www.ptt.cc/bbs/Boy-Girl/M.1620034856.A...</td>
      <td>Re: [討論] 如果另一半騎車讓你覺得很危險</td>
      <td>Mon May  3 17:40:53 2021</td>
      <td>我阿肥啦，因為開車技術太差不敢交女朋友QQ\n\n阿肥建議啦，真的要花點心思練車才好開車門也...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>foam0406 (南山南)</td>
      <td>https://www.ptt.cc/bbs/Boy-Girl/M.1620039447.A...</td>
      <td>[討論] 會不喜歡吃飯吃很慢的異性嗎</td>
      <td>Mon May  3 18:57:25 2021</td>
      <td>如題\n小魯認識一個女生\n之前跟她吃火鍋\n下班吃的\n\n\n\n七點開始吃\n我大概八...</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
</section>
<section id="vi-scraping-comments">
<h2>VI. Scraping comments<a class="headerlink" href="#vi-scraping-comments" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">NavigableString</span>
<span class="n">all_post</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">links</span><span class="p">[:</span><span class="mi">5</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">link</span><span class="p">)</span>
    <span class="n">resulrests</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">link</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
    <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s2">&quot;html.parser&quot;</span><span class="p">)</span>
    <span class="n">metas</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">class_</span><span class="o">=</span><span class="s1">&#39;article-meta-value&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">metas</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> 
        <span class="k">continue</span>
    <span class="n">author</span> <span class="o">=</span> <span class="n">metas</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">metas</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">text</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="n">metas</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">text</span>
    
    <span class="n">content</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="k">for</span> <span class="n">text</span> <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;main-content&#39;</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">NavigableString</span><span class="p">):</span>
            <span class="n">content</span> <span class="o">+=</span> <span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
    
    <span class="n">comments</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">push</span> <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">class_</span><span class="o">=</span><span class="s2">&quot;push&quot;</span><span class="p">):</span>
        <span class="n">push_tag</span> <span class="o">=</span> <span class="n">push</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">class_</span><span class="o">=</span><span class="s1">&#39;push-tag&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
        <span class="n">push_userid</span> <span class="o">=</span> <span class="n">push</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">class_</span><span class="o">=</span><span class="s1">&#39;push-userid&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
        <span class="n">push_content</span> <span class="o">=</span> <span class="n">push</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">class_</span><span class="o">=</span><span class="s1">&#39;push-content&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
        <span class="n">push_ipdatetime</span> <span class="o">=</span> <span class="n">push</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">class_</span><span class="o">=</span><span class="s1">&#39;push-ipdatetime&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>

        <span class="c1">#print push_userid, push_content, push_ipdatetime</span>
        <span class="n">comments</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s1">&#39;tag&#39;</span><span class="p">:</span> <span class="n">push_tag</span><span class="p">,</span><span class="s1">&#39;userid&#39;</span><span class="p">:</span><span class="n">push_userid</span><span class="p">,</span> 
                         <span class="s1">&#39;content&#39;</span><span class="p">:</span><span class="n">push_content</span><span class="p">,</span> 
                         <span class="s1">&#39;timestamp&#39;</span><span class="p">:</span><span class="n">push_ipdatetime</span><span class="p">})</span>
    <span class="n">all_post</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s1">&#39;author&#39;</span><span class="p">:</span><span class="n">author</span><span class="p">,</span> 
                     <span class="s1">&#39;link&#39;</span><span class="p">:</span><span class="n">link</span><span class="p">,</span>
                      <span class="s1">&#39;title&#39;</span><span class="p">:</span><span class="n">title</span><span class="p">,</span> 
                      <span class="s1">&#39;timestamp&#39;</span><span class="p">:</span><span class="n">timestamp</span><span class="p">,</span> 
                      <span class="s1">&#39;content&#39;</span><span class="p">:</span><span class="n">content</span><span class="p">,</span> 
                      <span class="s1">&#39;comments&#39;</span><span class="p">:</span><span class="n">comments</span><span class="p">})</span> 
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>https://www.ptt.cc/bbs/Boy-Girl/M.1620027067.A.B37.html
https://www.ptt.cc/bbs/Boy-Girl/M.1620031172.A.255.html
https://www.ptt.cc/bbs/Boy-Girl/M.1620032241.A.610.html
https://www.ptt.cc/bbs/Boy-Girl/M.1620034856.A.1BD.html
https://www.ptt.cc/bbs/Boy-Girl/M.1620039447.A.4AE.html
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">all_post</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>author</th>
      <th>link</th>
      <th>title</th>
      <th>timestamp</th>
      <th>content</th>
      <th>comments</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>foam0406 (南山南)</td>
      <td>https://www.ptt.cc/bbs/Boy-Girl/M.1620027067.A...</td>
      <td>[討論] 會不喜歡吃飯吃很慢的異性嗎</td>
      <td>Mon May  3 18:57:25 2021</td>
      <td>如題\n小魯認識一個女生\n之前跟她吃火鍋\n下班吃的\n\n\n\n七點開始吃\n我大概八...</td>
      <td>[{'tag': '推 ', 'userid': 'mintsnow', 'content'...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>foam0406 (南山南)</td>
      <td>https://www.ptt.cc/bbs/Boy-Girl/M.1620031172.A...</td>
      <td>[討論] 會不喜歡吃飯吃很慢的異性嗎</td>
      <td>Mon May  3 18:57:25 2021</td>
      <td>如題\n小魯認識一個女生\n之前跟她吃火鍋\n下班吃的\n\n\n\n七點開始吃\n我大概八...</td>
      <td>[{'tag': '推 ', 'userid': 'mintsnow', 'content'...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>foam0406 (南山南)</td>
      <td>https://www.ptt.cc/bbs/Boy-Girl/M.1620032241.A...</td>
      <td>[討論] 會不喜歡吃飯吃很慢的異性嗎</td>
      <td>Mon May  3 18:57:25 2021</td>
      <td>如題\n小魯認識一個女生\n之前跟她吃火鍋\n下班吃的\n\n\n\n七點開始吃\n我大概八...</td>
      <td>[{'tag': '推 ', 'userid': 'mintsnow', 'content'...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>foam0406 (南山南)</td>
      <td>https://www.ptt.cc/bbs/Boy-Girl/M.1620034856.A...</td>
      <td>[討論] 會不喜歡吃飯吃很慢的異性嗎</td>
      <td>Mon May  3 18:57:25 2021</td>
      <td>如題\n小魯認識一個女生\n之前跟她吃火鍋\n下班吃的\n\n\n\n七點開始吃\n我大概八...</td>
      <td>[{'tag': '推 ', 'userid': 'mintsnow', 'content'...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>foam0406 (南山南)</td>
      <td>https://www.ptt.cc/bbs/Boy-Girl/M.1620039447.A...</td>
      <td>[討論] 會不喜歡吃飯吃很慢的異性嗎</td>
      <td>Mon May  3 18:57:25 2021</td>
      <td>如題\n小魯認識一個女生\n之前跟她吃火鍋\n下班吃的\n\n\n\n七點開始吃\n我大概八...</td>
      <td>[{'tag': '推 ', 'userid': 'mintsnow', 'content'...</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">all_post</span><span class="p">)</span><span class="o">.</span><span class="n">explode</span><span class="p">(</span><span class="s1">&#39;comments&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>author</th>
      <th>link</th>
      <th>title</th>
      <th>timestamp</th>
      <th>content</th>
      <th>comments</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>foam0406 (南山南)</td>
      <td>https://www.ptt.cc/bbs/Boy-Girl/M.1620027067.A...</td>
      <td>[討論] 會不喜歡吃飯吃很慢的異性嗎</td>
      <td>Mon May  3 18:57:25 2021</td>
      <td>如題\n小魯認識一個女生\n之前跟她吃火鍋\n下班吃的\n\n\n\n七點開始吃\n我大概八...</td>
      <td>{'tag': '推 ', 'userid': 'mintsnow', 'content':...</td>
    </tr>
    <tr>
      <th>0</th>
      <td>foam0406 (南山南)</td>
      <td>https://www.ptt.cc/bbs/Boy-Girl/M.1620027067.A...</td>
      <td>[討論] 會不喜歡吃飯吃很慢的異性嗎</td>
      <td>Mon May  3 18:57:25 2021</td>
      <td>如題\n小魯認識一個女生\n之前跟她吃火鍋\n下班吃的\n\n\n\n七點開始吃\n我大概八...</td>
      <td>{'tag': '→ ', 'userid': 'onizuka7kimo', 'conte...</td>
    </tr>
    <tr>
      <th>0</th>
      <td>foam0406 (南山南)</td>
      <td>https://www.ptt.cc/bbs/Boy-Girl/M.1620027067.A...</td>
      <td>[討論] 會不喜歡吃飯吃很慢的異性嗎</td>
      <td>Mon May  3 18:57:25 2021</td>
      <td>如題\n小魯認識一個女生\n之前跟她吃火鍋\n下班吃的\n\n\n\n七點開始吃\n我大概八...</td>
      <td>{'tag': '推 ', 'userid': 'wl843907', 'content':...</td>
    </tr>
    <tr>
      <th>0</th>
      <td>foam0406 (南山南)</td>
      <td>https://www.ptt.cc/bbs/Boy-Girl/M.1620027067.A...</td>
      <td>[討論] 會不喜歡吃飯吃很慢的異性嗎</td>
      <td>Mon May  3 18:57:25 2021</td>
      <td>如題\n小魯認識一個女生\n之前跟她吃火鍋\n下班吃的\n\n\n\n七點開始吃\n我大概八...</td>
      <td>{'tag': '推 ', 'userid': 'mind324', 'content': ...</td>
    </tr>
    <tr>
      <th>0</th>
      <td>foam0406 (南山南)</td>
      <td>https://www.ptt.cc/bbs/Boy-Girl/M.1620027067.A...</td>
      <td>[討論] 會不喜歡吃飯吃很慢的異性嗎</td>
      <td>Mon May  3 18:57:25 2021</td>
      <td>如題\n小魯認識一個女生\n之前跟她吃火鍋\n下班吃的\n\n\n\n七點開始吃\n我大概八...</td>
      <td>{'tag': '推 ', 'userid': 'Alan1988', 'content':...</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>foam0406 (南山南)</td>
      <td>https://www.ptt.cc/bbs/Boy-Girl/M.1620039447.A...</td>
      <td>[討論] 會不喜歡吃飯吃很慢的異性嗎</td>
      <td>Mon May  3 18:57:25 2021</td>
      <td>如題\n小魯認識一個女生\n之前跟她吃火鍋\n下班吃的\n\n\n\n七點開始吃\n我大概八...</td>
      <td>{'tag': '推 ', 'userid': 'fanfan0113', 'content...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>foam0406 (南山南)</td>
      <td>https://www.ptt.cc/bbs/Boy-Girl/M.1620039447.A...</td>
      <td>[討論] 會不喜歡吃飯吃很慢的異性嗎</td>
      <td>Mon May  3 18:57:25 2021</td>
      <td>如題\n小魯認識一個女生\n之前跟她吃火鍋\n下班吃的\n\n\n\n七點開始吃\n我大概八...</td>
      <td>{'tag': '推 ', 'userid': 'edc3', 'content': ': ...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>foam0406 (南山南)</td>
      <td>https://www.ptt.cc/bbs/Boy-Girl/M.1620039447.A...</td>
      <td>[討論] 會不喜歡吃飯吃很慢的異性嗎</td>
      <td>Mon May  3 18:57:25 2021</td>
      <td>如題\n小魯認識一個女生\n之前跟她吃火鍋\n下班吃的\n\n\n\n七點開始吃\n我大概八...</td>
      <td>{'tag': '推 ', 'userid': 'fix78', 'content': ':...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>foam0406 (南山南)</td>
      <td>https://www.ptt.cc/bbs/Boy-Girl/M.1620039447.A...</td>
      <td>[討論] 會不喜歡吃飯吃很慢的異性嗎</td>
      <td>Mon May  3 18:57:25 2021</td>
      <td>如題\n小魯認識一個女生\n之前跟她吃火鍋\n下班吃的\n\n\n\n七點開始吃\n我大概八...</td>
      <td>{'tag': '→ ', 'userid': 'windgaia', 'content':...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>foam0406 (南山南)</td>
      <td>https://www.ptt.cc/bbs/Boy-Girl/M.1620039447.A...</td>
      <td>[討論] 會不喜歡吃飯吃很慢的異性嗎</td>
      <td>Mon May  3 18:57:25 2021</td>
      <td>如題\n小魯認識一個女生\n之前跟她吃火鍋\n下班吃的\n\n\n\n七點開始吃\n我大概八...</td>
      <td>{'tag': '推 ', 'userid': 'enemyli', 'content': ...</td>
    </tr>
  </tbody>
</table>
<p>1020 rows × 6 columns</p>
</div></div></div>
</div>
</section>
<section id="vii-saving-data">
<h2>VII. Saving data<a class="headerlink" href="#vii-saving-data" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pickle</span>
<span class="c1"># with open(&#39;ptt1092_testing.pkl&#39;, &#39;wb&#39;) as fout:  # Python 3: open(..., &#39;wb&#39;)</span>
<span class="c1">#     pickle.dump(all_post, fout)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="viii-scraping-with-cookies">
<h2>VIII. Scraping with Cookies<a class="headerlink" href="#viii-scraping-with-cookies" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://www.ptt.cc/bbs/Gossiping/index.html&#39;</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;!DOCTYPE html&gt;
&lt;html&gt;
	&lt;head&gt;
		&lt;meta charset=&quot;utf-8&quot;&gt;
		

&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;

&lt;title&gt;批踢踢實業坊&lt;/title&gt;

&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;//images.ptt.cc/bbs/v2.27/bbs-common.css&quot;&gt;
&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;//images.ptt.cc/bbs/v2.27/bbs-base.css&quot; media=&quot;screen&quot;&gt;
&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;//images.ptt.cc/bbs/v2.27/bbs-custom.css&quot;&gt;
&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;//images.ptt.cc/bbs/v2.27/pushstream.css&quot; media=&quot;screen&quot;&gt;
&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;//images.ptt.cc/bbs/v2.27/bbs-print.css&quot; media=&quot;print&quot;&gt;




	&lt;/head&gt;
    &lt;body&gt;
		
&lt;div class=&quot;bbs-screen bbs-content&quot;&gt;
    &lt;div class=&quot;over18-notice&quot;&gt;
        &lt;p&gt;本網站已依網站內容分級規定處理&lt;/p&gt;

        &lt;p&gt;警告︰您即將進入之看板內容需滿十八歲方可瀏覽。&lt;/p&gt;

        &lt;p&gt;若您尚未年滿十八歲，請點選離開。若您已滿十八歲，亦不可將本區之內容派發、傳閱、出售、出租、交給或借予年齡未滿18歲的人士瀏覽，或將本網站內容向該人士出示、播放或放映。&lt;/p&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;div class=&quot;bbs-screen bbs-content center clear&quot;&gt;
    &lt;form action=&quot;/ask/over18&quot; method=&quot;post&quot;&gt;
        &lt;input type=&quot;hidden&quot; name=&quot;from&quot; value=&quot;/bbs/Gossiping/index.html&quot;&gt;
        &lt;div class=&quot;over18-button-container&quot;&gt;
            &lt;button class=&quot;btn-big&quot; type=&quot;submit&quot; name=&quot;yes&quot; value=&quot;yes&quot;&gt;我同意，我已年滿十八歲&lt;br&gt;&lt;small&gt;進入&lt;/small&gt;&lt;/button&gt;
        &lt;/div&gt;
        &lt;div class=&quot;over18-button-container&quot;&gt;
            &lt;button class=&quot;btn-big&quot; type=&quot;submit&quot; name=&quot;no&quot; value=&quot;no&quot;&gt;未滿十八歲或不同意本條款&lt;br&gt;&lt;small&gt;離開&lt;/small&gt;&lt;/button&gt;
        &lt;/div&gt;
    &lt;/form&gt;
&lt;/div&gt;

		



&lt;script async src=&quot;https://www.googletagmanager.com/gtag/js?id=G-DZ6Y3BY9GW&quot;&gt;&lt;/script&gt;
&lt;script&gt;
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag(&#39;js&#39;, new Date());

      gtag(&#39;config&#39;, &#39;G-DZ6Y3BY9GW&#39;);
&lt;/script&gt;
&lt;script&gt;
  (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,&#39;script&#39;,&#39;https://www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;);

  ga(&#39;create&#39;, &#39;UA-32365737-1&#39;, {
    cookieDomain: &#39;ptt.cc&#39;,
    legacyCookieDomain: &#39;ptt.cc&#39;
  });
  ga(&#39;send&#39;, &#39;pageview&#39;);
&lt;/script&gt;


		
&lt;script src=&quot;//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;//images.ptt.cc/bbs/v2.27/bbs.js&quot;&gt;&lt;/script&gt;

    &lt;script defer src=&quot;https://static.cloudflareinsights.com/beacon.min.js/v84a3a4012de94ce1a686ba8c167c359c1696973893317&quot; integrity=&quot;sha512-euoFGowhlaLqXsPWQ48qSkBSCFs3DPRyiwVu3FjR96cMPx+Fr+gpWRhIafcHwqwCqWS42RZhIudOvEI+Ckf6MA==&quot; data-cf-beacon=&#39;{&quot;rayId&quot;:&quot;81d0e56dba3a2105&quot;,&quot;version&quot;:&quot;2023.10.0&quot;,&quot;r&quot;:1,&quot;token&quot;:&quot;515615eb5fab4c9b91a11e9bf529e6cf&quot;,&quot;b&quot;:1}&#39; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre></div>
</div>
</div>
</div>
<section id="adding-cookies">
<h3>8.1 Adding cookies<a class="headerlink" href="#adding-cookies" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cookies</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;over18&#39;</span><span class="p">:</span> <span class="s1">&#39;1&#39;</span><span class="p">}</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">cookies</span> <span class="o">=</span> <span class="n">cookies</span><span class="p">)</span>
<span class="n">res</span><span class="o">.</span><span class="n">text</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n\t&lt;head&gt;\n\t\t&lt;meta charset=&quot;utf-8&quot;&gt;\n\t\t\n\n&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;\n\n&lt;title&gt;看板 Gossiping 文章列表 - 批踢踢實業坊&lt;/title&gt;\n\n&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;//images.ptt.cc/bbs/v2.27/bbs-common.css&quot;&gt;\n&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;//images.ptt.cc/bbs/v2.27/bbs-base.css&quot; media=&quot;screen&quot;&gt;\n&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;//images.ptt.cc/bbs/v2.27/bbs-custom.css&quot;&gt;\n&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;//images.ptt.cc/bbs/v2.27/pushstream.css&quot; media=&quot;screen&quot;&gt;\n&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;//images.ptt.cc/bbs/v2.27/bbs-print.css&quot; media=&quot;print&quot;&gt;\n\n\n\n\n\t&lt;/head&gt;\n    &lt;body&gt;\n\t\t\n&lt;div id=&quot;topbar-container&quot;&gt;\n\t&lt;div id=&quot;topbar&quot; class=&quot;bbs-content&quot;&gt;\n\t\t&lt;a id=&quot;logo&quot; href=&quot;/bbs/&quot;&gt;批踢踢實業坊&lt;/a&gt;\n\t\t&lt;span&gt;&amp;rsaquo;&lt;/span&gt;\n\t\t&lt;a class=&quot;board&quot; href=&quot;/bbs/Gossiping/index.html&quot;&gt;&lt;span class=&quot;board-label&quot;&gt;看板 &lt;/span&gt;Gossiping&lt;/a&gt;\n\t\t&lt;a class=&quot;right small&quot; href=&quot;/about.html&quot;&gt;關於我們&lt;/a&gt;\n\t\t&lt;a class=&quot;right small&quot; href=&quot;/contact.html&quot;&gt;聯絡資訊&lt;/a&gt;\n\t&lt;/div&gt;\n&lt;/div&gt;\n\n&lt;div id=&quot;main-container&quot;&gt;\n\t&lt;div id=&quot;action-bar-container&quot;&gt;\n\t\t&lt;div class=&quot;action-bar&quot;&gt;\n\t\t\t&lt;div class=&quot;btn-group btn-group-dir&quot;&gt;\n\t\t\t\t&lt;a class=&quot;btn selected&quot; href=&quot;/bbs/Gossiping/index.html&quot;&gt;看板&lt;/a&gt;\n\t\t\t\t&lt;a class=&quot;btn&quot; href=&quot;/man/Gossiping/index.html&quot;&gt;精華區&lt;/a&gt;\n\t\t\t&lt;/div&gt;\n\t\t\t&lt;div class=&quot;btn-group btn-group-paging&quot;&gt;\n\t\t\t\t&lt;a class=&quot;btn wide&quot; href=&quot;/bbs/Gossiping/index1.html&quot;&gt;最舊&lt;/a&gt;\n\t\t\t\t&lt;a class=&quot;btn wide&quot; href=&quot;/bbs/Gossiping/index39378.html&quot;&gt;&amp;lsaquo; 上頁&lt;/a&gt;\n\t\t\t\t&lt;a class=&quot;btn wide disabled&quot;&gt;下頁 &amp;rsaquo;&lt;/a&gt;\n\t\t\t\t&lt;a class=&quot;btn wide&quot; href=&quot;/bbs/Gossiping/index.html&quot;&gt;最新&lt;/a&gt;\n\t\t\t&lt;/div&gt;\n\t\t&lt;/div&gt;\n\t&lt;/div&gt;\n\n\t&lt;div class=&quot;r-list-container action-bar-margin bbs-screen&quot;&gt;\n\t\t&lt;div class=&quot;search-bar&quot;&gt;\n\t\t\t&lt;form type=&quot;get&quot; action=&quot;search&quot; id=&quot;search-bar&quot;&gt;\n\t\t\t\t&lt;input class=&quot;query&quot; type=&quot;text&quot; name=&quot;q&quot; value=&quot;&quot; placeholder=&quot;搜尋文章&amp;#x22ef;&quot;&gt;\n\t\t\t&lt;/form&gt;\n\t\t&lt;/div&gt;\n\n\t\t\n\t\t\n            \n        \n        \n\t\t&lt;div class=&quot;r-ent&quot;&gt;\n\t\t\t&lt;div class=&quot;nrec&quot;&gt;&lt;span class=&quot;hl f2&quot;&gt;2&lt;/span&gt;&lt;/div&gt;\n\t\t\t&lt;div class=&quot;title&quot;&gt;\n\t\t\t\n\t\t\t\t&lt;a href=&quot;/bbs/Gossiping/M.1698471864.A.658.html&quot;&gt;[問卦] 台女說今天台北的男生都不理她～？&lt;/a&gt;\n\t\t\t\n\t\t\t&lt;/div&gt;\n\t\t\t&lt;div class=&quot;meta&quot;&gt;\n\t\t\t\t&lt;div class=&quot;author&quot;&gt;lw5575&lt;/div&gt;\n\t\t\t\t&lt;div class=&quot;article-menu&quot;&gt;\n\t\t\t\t\t\n\t\t\t\t\t&lt;div class=&quot;trigger&quot;&gt;&amp;#x22ef;&lt;/div&gt;\n\t\t\t\t\t&lt;div class=&quot;dropdown&quot;&gt;\n\t\t\t\t\t\t&lt;div class=&quot;item&quot;&gt;&lt;a href=&quot;/bbs/Gossiping/search?q=thread%3A%5B%E5%95%8F%E5%8D%A6%5D&amp;#43;%E5%8F%B0%E5%A5%B3%E8%AA%AA%E4%BB%8A%E5%A4%A9%E5%8F%B0%E5%8C%97%E7%9A%84%E7%94%B7%E7%94%9F%E9%83%BD%E4%B8%8D%E7%90%86%E5%A5%B9%EF%BD%9E%EF%BC%9F&quot;&gt;搜尋同標題文章&lt;/a&gt;&lt;/div&gt;\n\t\t\t\t\t\t\n\t\t\t\t\t\t&lt;div class=&quot;item&quot;&gt;&lt;a href=&quot;/bbs/Gossiping/search?q=author%3Alw5575&quot;&gt;搜尋看板內 lw5575 的文章&lt;/a&gt;&lt;/div&gt;\n\t\t\t\t\t\t\n\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t\t\n\t\t\t\t&lt;/div&gt;\n\t\t\t\t&lt;div class=&quot;date&quot;&gt;10/28&lt;/div&gt;\n\t\t\t\t&lt;div class=&quot;mark&quot;&gt;&lt;/div&gt;\n\t\t\t&lt;/div&gt;\n\t\t&lt;/div&gt;\n\n\t\t\n            \n        \n        \n\t\t&lt;div class=&quot;r-ent&quot;&gt;\n\t\t\t&lt;div class=&quot;nrec&quot;&gt;&lt;span class=&quot;hl f2&quot;&gt;1&lt;/span&gt;&lt;/div&gt;\n\t\t\t&lt;div class=&quot;title&quot;&gt;\n\t\t\t\n\t\t\t\t&lt;a href=&quot;/bbs/Gossiping/M.1698471925.A.E01.html&quot;&gt;Re: [新聞]「打仗可以啊！民進黨員站第一線」館長陳&lt;/a&gt;\n\t\t\t\n\t\t\t&lt;/div&gt;\n\t\t\t&lt;div class=&quot;meta&quot;&gt;\n\t\t\t\t&lt;div class=&quot;author&quot;&gt;eythans&lt;/div&gt;\n\t\t\t\t&lt;div class=&quot;article-menu&quot;&gt;\n\t\t\t\t\t\n\t\t\t\t\t&lt;div class=&quot;trigger&quot;&gt;&amp;#x22ef;&lt;/div&gt;\n\t\t\t\t\t&lt;div class=&quot;dropdown&quot;&gt;\n\t\t\t\t\t\t&lt;div class=&quot;item&quot;&gt;&lt;a href=&quot;/bbs/Gossiping/search?q=thread%3A%5B%E6%96%B0%E8%81%9E%5D%E3%80%8C%E6%89%93%E4%BB%97%E5%8F%AF%E4%BB%A5%E5%95%8A%EF%BC%81%E6%B0%91%E9%80%B2%E9%BB%A8%E5%93%A1%E7%AB%99%E7%AC%AC%E4%B8%80%E7%B7%9A%E3%80%8D%E9%A4%A8%E9%95%B7%E9%99%B3&quot;&gt;搜尋同標題文章&lt;/a&gt;&lt;/div&gt;\n\t\t\t\t\t\t\n\t\t\t\t\t\t&lt;div class=&quot;item&quot;&gt;&lt;a href=&quot;/bbs/Gossiping/search?q=author%3Aeythans&quot;&gt;搜尋看板內 eythans 的文章&lt;/a&gt;&lt;/div&gt;\n\t\t\t\t\t\t\n\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t\t\n\t\t\t\t&lt;/div&gt;\n\t\t\t\t&lt;div class=&quot;date&quot;&gt;10/28&lt;/div&gt;\n\t\t\t\t&lt;div class=&quot;mark&quot;&gt;&lt;/div&gt;\n\t\t\t&lt;/div&gt;\n\t\t&lt;/div&gt;\n\n\t\t\n            \n        \n        \n\t\t&lt;div class=&quot;r-ent&quot;&gt;\n\t\t\t&lt;div class=&quot;nrec&quot;&gt;&lt;span class=&quot;hl f3&quot;&gt;12&lt;/span&gt;&lt;/div&gt;\n\t\t\t&lt;div class=&quot;title&quot;&gt;\n\t\t\t\n\t\t\t\t&lt;a href=&quot;/bbs/Gossiping/M.1698472007.A.BEF.html&quot;&gt;[新聞] 陳沂獲不起訴…送鄭家純律師黑菊！律師&lt;/a&gt;\n\t\t\t\n\t\t\t&lt;/div&gt;\n\t\t\t&lt;div class=&quot;meta&quot;&gt;\n\t\t\t\t&lt;div class=&quot;author&quot;&gt;Chang0212&lt;/div&gt;\n\t\t\t\t&lt;div class=&quot;article-menu&quot;&gt;\n\t\t\t\t\t\n\t\t\t\t\t&lt;div class=&quot;trigger&quot;&gt;&amp;#x22ef;&lt;/div&gt;\n\t\t\t\t\t&lt;div class=&quot;dropdown&quot;&gt;\n\t\t\t\t\t\t&lt;div class=&quot;item&quot;&gt;&lt;a href=&quot;/bbs/Gossiping/search?q=thread%3A%5B%E6%96%B0%E8%81%9E%5D&amp;#43;%E9%99%B3%E6%B2%82%E7%8D%B2%E4%B8%8D%E8%B5%B7%E8%A8%B4%E2%80%A6%E9%80%81%E9%84%AD%E5%AE%B6%E7%B4%94%E5%BE%8B%E5%B8%AB%E9%BB%91%E8%8F%8A%EF%BC%81%E5%BE%8B%E5%B8%AB&quot;&gt;搜尋同標題文章&lt;/a&gt;&lt;/div&gt;\n\t\t\t\t\t\t\n\t\t\t\t\t\t&lt;div class=&quot;item&quot;&gt;&lt;a href=&quot;/bbs/Gossiping/search?q=author%3AChang0212&quot;&gt;搜尋看板內 Chang0212 的文章&lt;/a&gt;&lt;/div&gt;\n\t\t\t\t\t\t\n\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t\t\n\t\t\t\t&lt;/div&gt;\n\t\t\t\t&lt;div class=&quot;date&quot;&gt;10/28&lt;/div&gt;\n\t\t\t\t&lt;div class=&quot;mark&quot;&gt;&lt;/div&gt;\n\t\t\t&lt;/div&gt;\n\t\t&lt;/div&gt;\n\n\t\t\n            \n        \n        \n\t\t&lt;div class=&quot;r-ent&quot;&gt;\n\t\t\t&lt;div class=&quot;nrec&quot;&gt;&lt;/div&gt;\n\t\t\t&lt;div class=&quot;title&quot;&gt;\n\t\t\t\n\t\t\t\t&lt;a href=&quot;/bbs/Gossiping/M.1698472136.A.AFA.html&quot;&gt;Re: [新聞] 中國西藏建寄宿學校強制漢化 藏人憂失去&lt;/a&gt;\n\t\t\t\n\t\t\t&lt;/div&gt;\n\t\t\t&lt;div class=&quot;meta&quot;&gt;\n\t\t\t\t&lt;div class=&quot;author&quot;&gt;longyin&lt;/div&gt;\n\t\t\t\t&lt;div class=&quot;article-menu&quot;&gt;\n\t\t\t\t\t\n\t\t\t\t\t&lt;div class=&quot;trigger&quot;&gt;&amp;#x22ef;&lt;/div&gt;\n\t\t\t\t\t&lt;div class=&quot;dropdown&quot;&gt;\n\t\t\t\t\t\t&lt;div class=&quot;item&quot;&gt;&lt;a href=&quot;/bbs/Gossiping/search?q=thread%3A%5B%E6%96%B0%E8%81%9E%5D&amp;#43;%E4%B8%AD%E5%9C%8B%E8%A5%BF%E8%97%8F%E5%BB%BA%E5%AF%84%E5%AE%BF%E5%AD%B8%E6%A0%A1%E5%BC%B7%E5%88%B6%E6%BC%A2%E5%8C%96&amp;#43;%E8%97%8F%E4%BA%BA%E6%86%82%E5%A4%B1%E5%8E%BB&quot;&gt;搜尋同標題文章&lt;/a&gt;&lt;/div&gt;\n\t\t\t\t\t\t\n\t\t\t\t\t\t&lt;div class=&quot;item&quot;&gt;&lt;a href=&quot;/bbs/Gossiping/search?q=author%3Alongyin&quot;&gt;搜尋看板內 longyin 的文章&lt;/a&gt;&lt;/div&gt;\n\t\t\t\t\t\t\n\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t\t\n\t\t\t\t&lt;/div&gt;\n\t\t\t\t&lt;div class=&quot;date&quot;&gt;10/28&lt;/div&gt;\n\t\t\t\t&lt;div class=&quot;mark&quot;&gt;&lt;/div&gt;\n\t\t\t&lt;/div&gt;\n\t\t&lt;/div&gt;\n\n\t\t\n            \n        \n        \n\t\t&lt;div class=&quot;r-ent&quot;&gt;\n\t\t\t&lt;div class=&quot;nrec&quot;&gt;&lt;/div&gt;\n\t\t\t&lt;div class=&quot;title&quot;&gt;\n\t\t\t\n\t\t\t\t&lt;a href=&quot;/bbs/Gossiping/M.1698472155.A.A5D.html&quot;&gt;[問卦] 陸配的選舉權？&lt;/a&gt;\n\t\t\t\n\t\t\t&lt;/div&gt;\n\t\t\t&lt;div class=&quot;meta&quot;&gt;\n\t\t\t\t&lt;div class=&quot;author&quot;&gt;Nick87061319&lt;/div&gt;\n\t\t\t\t&lt;div class=&quot;article-menu&quot;&gt;\n\t\t\t\t\t\n\t\t\t\t\t&lt;div class=&quot;trigger&quot;&gt;&amp;#x22ef;&lt;/div&gt;\n\t\t\t\t\t&lt;div class=&quot;dropdown&quot;&gt;\n\t\t\t\t\t\t&lt;div class=&quot;item&quot;&gt;&lt;a href=&quot;/bbs/Gossiping/search?q=thread%3A%5B%E5%95%8F%E5%8D%A6%5D&amp;#43;%E9%99%B8%E9%85%8D%E7%9A%84%E9%81%B8%E8%88%89%E6%AC%8A%EF%BC%9F&quot;&gt;搜尋同標題文章&lt;/a&gt;&lt;/div&gt;\n\t\t\t\t\t\t\n\t\t\t\t\t\t&lt;div class=&quot;item&quot;&gt;&lt;a href=&quot;/bbs/Gossiping/search?q=author%3ANick87061319&quot;&gt;搜尋看板內 Nick87061319 的文章&lt;/a&gt;&lt;/div&gt;\n\t\t\t\t\t\t\n\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t\t\n\t\t\t\t&lt;/div&gt;\n\t\t\t\t&lt;div class=&quot;date&quot;&gt;10/28&lt;/div&gt;\n\t\t\t\t&lt;div class=&quot;mark&quot;&gt;&lt;/div&gt;\n\t\t\t&lt;/div&gt;\n\t\t&lt;/div&gt;\n\n\t\t\n        \n        &lt;div class=&quot;r-list-sep&quot;&gt;&lt;/div&gt;\n            \n                \n        \n        \n\t\t&lt;div class=&quot;r-ent&quot;&gt;\n\t\t\t&lt;div class=&quot;nrec&quot;&gt;&lt;/div&gt;\n\t\t\t&lt;div class=&quot;title&quot;&gt;\n\t\t\t\n\t\t\t\t&lt;a href=&quot;/bbs/Gossiping/M.1694428619.A.DBA.html&quot;&gt;[公告] 八卦板板規(2023.09.11)&lt;/a&gt;\n\t\t\t\n\t\t\t&lt;/div&gt;\n\t\t\t&lt;div class=&quot;meta&quot;&gt;\n\t\t\t\t&lt;div class=&quot;author&quot;&gt;lwt501cx&lt;/div&gt;\n\t\t\t\t&lt;div class=&quot;article-menu&quot;&gt;\n\t\t\t\t\t\n\t\t\t\t\t&lt;div class=&quot;trigger&quot;&gt;&amp;#x22ef;&lt;/div&gt;\n\t\t\t\t\t&lt;div class=&quot;dropdown&quot;&gt;\n\t\t\t\t\t\t&lt;div class=&quot;item&quot;&gt;&lt;a href=&quot;/bbs/Gossiping/search?q=thread%3A%5B%E5%85%AC%E5%91%8A%5D&amp;#43;%E5%85%AB%E5%8D%A6%E6%9D%BF%E6%9D%BF%E8%A6%8F%282023.09.11%29&quot;&gt;搜尋同標題文章&lt;/a&gt;&lt;/div&gt;\n\t\t\t\t\t\t\n\t\t\t\t\t\t&lt;div class=&quot;item&quot;&gt;&lt;a href=&quot;/bbs/Gossiping/search?q=author%3Alwt501cx&quot;&gt;搜尋看板內 lwt501cx 的文章&lt;/a&gt;&lt;/div&gt;\n\t\t\t\t\t\t\n\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t\t\n\t\t\t\t&lt;/div&gt;\n\t\t\t\t&lt;div class=&quot;date&quot;&gt; 9/11&lt;/div&gt;\n\t\t\t\t&lt;div class=&quot;mark&quot;&gt;!&lt;/div&gt;\n\t\t\t&lt;/div&gt;\n\t\t&lt;/div&gt;\n\n            \n                \n        \n        \n\t\t&lt;div class=&quot;r-ent&quot;&gt;\n\t\t\t&lt;div class=&quot;nrec&quot;&gt;&lt;span class=&quot;hl f3&quot;&gt;52&lt;/span&gt;&lt;/div&gt;\n\t\t\t&lt;div class=&quot;title&quot;&gt;\n\t\t\t\n\t\t\t\t&lt;a href=&quot;/bbs/Gossiping/M.1697705608.A.A7A.html&quot;&gt;[協尋] 長輩憂鬱開車離家&lt;/a&gt;\n\t\t\t\n\t\t\t&lt;/div&gt;\n\t\t\t&lt;div class=&quot;meta&quot;&gt;\n\t\t\t\t&lt;div class=&quot;author&quot;&gt;xup6gjcjo4&lt;/div&gt;\n\t\t\t\t&lt;div class=&quot;article-menu&quot;&gt;\n\t\t\t\t\t\n\t\t\t\t\t&lt;div class=&quot;trigger&quot;&gt;&amp;#x22ef;&lt;/div&gt;\n\t\t\t\t\t&lt;div class=&quot;dropdown&quot;&gt;\n\t\t\t\t\t\t&lt;div class=&quot;item&quot;&gt;&lt;a href=&quot;/bbs/Gossiping/search?q=thread%3A%5B%E5%8D%94%E5%B0%8B%5D&amp;#43;%E9%95%B7%E8%BC%A9%E6%86%82%E9%AC%B1%E9%96%8B%E8%BB%8A%E9%9B%A2%E5%AE%B6&quot;&gt;搜尋同標題文章&lt;/a&gt;&lt;/div&gt;\n\t\t\t\t\t\t\n\t\t\t\t\t\t&lt;div class=&quot;item&quot;&gt;&lt;a href=&quot;/bbs/Gossiping/search?q=author%3Axup6gjcjo4&quot;&gt;搜尋看板內 xup6gjcjo4 的文章&lt;/a&gt;&lt;/div&gt;\n\t\t\t\t\t\t\n\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t\t\n\t\t\t\t&lt;/div&gt;\n\t\t\t\t&lt;div class=&quot;date&quot;&gt;10/19&lt;/div&gt;\n\t\t\t\t&lt;div class=&quot;mark&quot;&gt;&lt;/div&gt;\n\t\t\t&lt;/div&gt;\n\t\t&lt;/div&gt;\n\n            \n                \n        \n        \n\t\t&lt;div class=&quot;r-ent&quot;&gt;\n\t\t\t&lt;div class=&quot;nrec&quot;&gt;&lt;span class=&quot;hl f3&quot;&gt;29&lt;/span&gt;&lt;/div&gt;\n\t\t\t&lt;div class=&quot;title&quot;&gt;\n\t\t\t\n\t\t\t\t&lt;a href=&quot;/bbs/Gossiping/M.1698059216.A.7CA.html&quot;&gt;[公告] 八卦板板主候選名單暨投票獎勵&lt;/a&gt;\n\t\t\t\n\t\t\t&lt;/div&gt;\n\t\t\t&lt;div class=&quot;meta&quot;&gt;\n\t\t\t\t&lt;div class=&quot;author&quot;&gt;lwt501cx&lt;/div&gt;\n\t\t\t\t&lt;div class=&quot;article-menu&quot;&gt;\n\t\t\t\t\t\n\t\t\t\t\t&lt;div class=&quot;trigger&quot;&gt;&amp;#x22ef;&lt;/div&gt;\n\t\t\t\t\t&lt;div class=&quot;dropdown&quot;&gt;\n\t\t\t\t\t\t&lt;div class=&quot;item&quot;&gt;&lt;a href=&quot;/bbs/Gossiping/search?q=thread%3A%5B%E5%85%AC%E5%91%8A%5D&amp;#43;%E5%85%AB%E5%8D%A6%E6%9D%BF%E6%9D%BF%E4%B8%BB%E5%80%99%E9%81%B8%E5%90%8D%E5%96%AE%E6%9A%A8%E6%8A%95%E7%A5%A8%E7%8D%8E%E5%8B%B5&quot;&gt;搜尋同標題文章&lt;/a&gt;&lt;/div&gt;\n\t\t\t\t\t\t\n\t\t\t\t\t\t&lt;div class=&quot;item&quot;&gt;&lt;a href=&quot;/bbs/Gossiping/search?q=author%3Alwt501cx&quot;&gt;搜尋看板內 lwt501cx 的文章&lt;/a&gt;&lt;/div&gt;\n\t\t\t\t\t\t\n\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t\t\n\t\t\t\t&lt;/div&gt;\n\t\t\t\t&lt;div class=&quot;date&quot;&gt;10/23&lt;/div&gt;\n\t\t\t\t&lt;div class=&quot;mark&quot;&gt;&lt;/div&gt;\n\t\t\t&lt;/div&gt;\n\t\t&lt;/div&gt;\n\n            \n                \n        \n        \n\t\t&lt;div class=&quot;r-ent&quot;&gt;\n\t\t\t&lt;div class=&quot;nrec&quot;&gt;&lt;span class=&quot;hl f2&quot;&gt;5&lt;/span&gt;&lt;/div&gt;\n\t\t\t&lt;div class=&quot;title&quot;&gt;\n\t\t\t\n\t\t\t\t&lt;a href=&quot;/bbs/Gossiping/M.1697930406.A.ADB.html&quot;&gt;[協尋] 10/20 20:40湖口鄉行車記錄器&lt;/a&gt;\n\t\t\t\n\t\t\t&lt;/div&gt;\n\t\t\t&lt;div class=&quot;meta&quot;&gt;\n\t\t\t\t&lt;div class=&quot;author&quot;&gt;x193hql&lt;/div&gt;\n\t\t\t\t&lt;div class=&quot;article-menu&quot;&gt;\n\t\t\t\t\t\n\t\t\t\t\t&lt;div class=&quot;trigger&quot;&gt;&amp;#x22ef;&lt;/div&gt;\n\t\t\t\t\t&lt;div class=&quot;dropdown&quot;&gt;\n\t\t\t\t\t\t&lt;div class=&quot;item&quot;&gt;&lt;a href=&quot;/bbs/Gossiping/search?q=thread%3A%5B%E5%8D%94%E5%B0%8B%5D&amp;#43;10%2F20&amp;#43;20%3A40%E6%B9%96%E5%8F%A3%E9%84%89%E8%A1%8C%E8%BB%8A%E8%A8%98%E9%8C%84%E5%99%A8&quot;&gt;搜尋同標題文章&lt;/a&gt;&lt;/div&gt;\n\t\t\t\t\t\t\n\t\t\t\t\t\t&lt;div class=&quot;item&quot;&gt;&lt;a href=&quot;/bbs/Gossiping/search?q=author%3Ax193hql&quot;&gt;搜尋看板內 x193hql 的文章&lt;/a&gt;&lt;/div&gt;\n\t\t\t\t\t\t\n\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t\t\n\t\t\t\t&lt;/div&gt;\n\t\t\t\t&lt;div class=&quot;date&quot;&gt;10/22&lt;/div&gt;\n\t\t\t\t&lt;div class=&quot;mark&quot;&gt;&lt;/div&gt;\n\t\t\t&lt;/div&gt;\n\t\t&lt;/div&gt;\n\n            \n                \n        \n        \n\t\t&lt;div class=&quot;r-ent&quot;&gt;\n\t\t\t&lt;div class=&quot;nrec&quot;&gt;&lt;span class=&quot;hl f3&quot;&gt;42&lt;/span&gt;&lt;/div&gt;\n\t\t\t&lt;div class=&quot;title&quot;&gt;\n\t\t\t\n\t\t\t\t&lt;a href=&quot;/bbs/Gossiping/M.1698230028.A.084.html&quot;&gt;[公告] Pitt手機投票教學&lt;/a&gt;\n\t\t\t\n\t\t\t&lt;/div&gt;\n\t\t\t&lt;div class=&quot;meta&quot;&gt;\n\t\t\t\t&lt;div class=&quot;author&quot;&gt;lwt501cx&lt;/div&gt;\n\t\t\t\t&lt;div class=&quot;article-menu&quot;&gt;\n\t\t\t\t\t\n\t\t\t\t\t&lt;div class=&quot;trigger&quot;&gt;&amp;#x22ef;&lt;/div&gt;\n\t\t\t\t\t&lt;div class=&quot;dropdown&quot;&gt;\n\t\t\t\t\t\t&lt;div class=&quot;item&quot;&gt;&lt;a href=&quot;/bbs/Gossiping/search?q=thread%3A%5B%E5%85%AC%E5%91%8A%5D&amp;#43;Pitt%E6%89%8B%E6%A9%9F%E6%8A%95%E7%A5%A8%E6%95%99%E5%AD%B8&quot;&gt;搜尋同標題文章&lt;/a&gt;&lt;/div&gt;\n\t\t\t\t\t\t\n\t\t\t\t\t\t&lt;div class=&quot;item&quot;&gt;&lt;a href=&quot;/bbs/Gossiping/search?q=author%3Alwt501cx&quot;&gt;搜尋看板內 lwt501cx 的文章&lt;/a&gt;&lt;/div&gt;\n\t\t\t\t\t\t\n\t\t\t\t\t&lt;/div&gt;\n\t\t\t\t\t\n\t\t\t\t&lt;/div&gt;\n\t\t\t\t&lt;div class=&quot;date&quot;&gt;10/25&lt;/div&gt;\n\t\t\t\t&lt;div class=&quot;mark&quot;&gt;M&lt;/div&gt;\n\t\t\t&lt;/div&gt;\n\t\t&lt;/div&gt;\n\n            \n        \n\t&lt;/div&gt;\n\n    \n&lt;div class=&quot;bbs-screen bbs-footer-message&quot;&gt;本網站已依台灣網站內容分級規定處理。此區域為限制級，未滿十八歲者不得瀏覽。&lt;/div&gt;\n\n&lt;/div&gt;\n\n\t\t\n\n\n\n&lt;script async src=&quot;https://www.googletagmanager.com/gtag/js?id=G-DZ6Y3BY9GW&quot;&gt;&lt;/script&gt;\n&lt;script&gt;\n      window.dataLayer = window.dataLayer || [];\n      function gtag(){dataLayer.push(arguments);}\n      gtag(\&#39;js\&#39;, new Date());\n\n      gtag(\&#39;config\&#39;, \&#39;G-DZ6Y3BY9GW\&#39;);\n&lt;/script&gt;\n&lt;script&gt;\n  (function(i,s,o,g,r,a,m){i[\&#39;GoogleAnalyticsObject\&#39;]=r;i[r]=i[r]||function(){\n  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\n  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\n  })(window,document,\&#39;script\&#39;,\&#39;https://www.google-analytics.com/analytics.js\&#39;,\&#39;ga\&#39;);\n\n  ga(\&#39;create\&#39;, \&#39;UA-32365737-1\&#39;, {\n    cookieDomain: \&#39;ptt.cc\&#39;,\n    legacyCookieDomain: \&#39;ptt.cc\&#39;\n  });\n  ga(\&#39;send\&#39;, \&#39;pageview\&#39;);\n&lt;/script&gt;\n\n\n\t\t\n&lt;script src=&quot;//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js&quot;&gt;&lt;/script&gt;\n&lt;script src=&quot;//images.ptt.cc/bbs/v2.27/bbs.js&quot;&gt;&lt;/script&gt;\n\n    &lt;script defer src=&quot;https://static.cloudflareinsights.com/beacon.min.js/v84a3a4012de94ce1a686ba8c167c359c1696973893317&quot; integrity=&quot;sha512-euoFGowhlaLqXsPWQ48qSkBSCFs3DPRyiwVu3FjR96cMPx+Fr+gpWRhIafcHwqwCqWS42RZhIudOvEI+Ckf6MA==&quot; data-cf-beacon=\&#39;{&quot;rayId&quot;:&quot;81d0e594afb66e4f&quot;,&quot;version&quot;:&quot;2023.10.0&quot;,&quot;r&quot;:1,&quot;token&quot;:&quot;515615eb5fab4c9b91a11e9bf529e6cf&quot;,&quot;b&quot;:1}\&#39; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n&#39;
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./PSS"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="P08_5_cases.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Scraping cases</p>
      </div>
    </a>
    <a class="right-next"
       href="../TM/TM01_tokenization.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">TM01 Tokenization</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> 目錄
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#i-introduction">I. Introduction</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#get-url-content-by-requests">1.1 Get url content by requests</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#using-chrome-devtools-to-get-right-elements">1.2 Using Chrome DevTools to get right elements</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#parsing-url-content-by-beautifulsoup">1.3 Parsing url content by beautifulsoup</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ii-get-links-from-a-page">II. Get links from a page</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#getting-response">2.1 Getting response</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#converting-webpage-to-a-soup-object">2.2 Converting webpage to a soup object</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#traversing-an-html-file-by-soup">2.3 Traversing an html file by soup</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#finding-all-links-in-the-doc">2.4 Finding all links in the doc</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#extracting-element-content-and-attribute">2.5 Extracting element content and attribute</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#append-links-into-a-list">2.6 <code class="docutils literal notranslate"><span class="pre">append()</span></code> links into a list</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#iii-get-article-links-from-the-first-page">III. Get article links from the first page</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#get-elements-by-a-specific-class">3.1 Get elements by a specific class</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#soup-select-with-css-selector">3.2 <code class="docutils literal notranslate"><span class="pre">soup.select()</span></code> with CSS selector</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#get-href-of-a">Get <code class="docutils literal notranslate"><span class="pre">href</span></code> of <code class="docutils literal notranslate"><span class="pre">&lt;a&gt;</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#using-try-and-except-to-handle-exception">3.3 Using <code class="docutils literal notranslate"><span class="pre">try</span></code> and <code class="docutils literal notranslate"><span class="pre">except</span></code> to handle exception</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#add-the-prefix-url-to-each-url">3.4 Add the prefix url to each url</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#appending-scraped-urls-to-a-list">3.5 Appending scraped urls to a list</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#iv-get-more-links-from-more-pages">IV. Get more links from more pages</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#get-the-last-page">4.1 Get the last page</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#get-the-last-10-pages">4.2 Get the last 10 pages</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#notes-break-continue-and-pass">Notes: break, continue, and pass</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#v-getting-post-content-for-each-post-link">V. Getting post content for each post link</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#get-metadata">5.1 Get metadata</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#assign-data-to-variables">5.2 Assign data to variables</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#get-all-content">5.3 Get all content</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#save-them-all-to-a-dictionary-and-append-to-a-list">5.4 Save them all to a dictionary and append to a list</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#vi-scraping-comments">VI. Scraping comments</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#vii-saving-data">VII. Saving data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#viii-scraping-with-cookies">VIII. Scraping with Cookies</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-cookies">8.1 Adding cookies</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
作者： JILUNG
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>


<!DOCTYPE html>


<html >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Pandas: filter, select, and timeline process &#8212; Programming for Social Scientists</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="../_static/.ipynb_checkpoints/custom-checkpoint.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'PSS/P06p2_filter_select_datetime';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="P06-3 Processing timestamp" href="P06p3_timestamp.html" />
    <link rel="prev" title="Pandas: Counting and Summarizing" href="P06p1_summarizing.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="None"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Programming for Social Scientists
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Basic Logic</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="P01_counting.html">P01-Counting</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="P01p_counting.html">P01-Practice</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="P02_0_basic.html">P02-Python Basic</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="P02p_basic.html">Practices 02 for Python basic</a></li>
<li class="toctree-l2"><a class="reference internal" href="P02_2_exceptions.html">Exceptions(Errors) Handling</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="P03_list_dictionary.html">P03-List and Dictionary</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="P03p.html">P03 Practice: Accessing dict and list</a></li>

<li class="toctree-l2"><a class="reference internal" href="P03p_ans.html">P03 Practice: Accessing dict and list</a></li>

</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="P04_for.html">P04 Flow Control</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="P04p1_for.html">P04 Practice01: for loop</a></li>
<li class="toctree-l2"><a class="reference internal" href="P04p2_search_maximum.html">P04 Practice02 Search &amp; Maximum</a></li>
<li class="toctree-l2"><a class="reference internal" href="P04p3_twitter_users.html">P04 Practice03 Twitter Users</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Data Exploration</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="P05_read_csv_json.html">P05 READ Files</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="P05p1_read_csv.html">P05-1 Read CSV</a></li>
<li class="toctree-l2"><a class="reference internal" href="P05p2_read_json.html">P05-2 Load and dump ubike json data</a></li>
<li class="toctree-l2"><a class="reference internal" href="P05p3_read_other_format.html">Read more formats</a></li>
</ul>
</li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="P06_pandas.html">P06 Pandas</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="P06p1_summarizing.html">Pandas: Counting and Summarizing</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Pandas: filter, select, and timeline process</a></li>
<li class="toctree-l2"><a class="reference internal" href="P06p3_timestamp.html">P06-3 Processing timestamp</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="P07_0_visualization.html">P07 Visualization</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="P07_1_plot_pandas.html">Making Charts with Pandas</a></li>
<li class="toctree-l2"><a class="reference internal" href="P07_2_bokeh.html">Bokeh &amp; Seaborn(Vaccinating)</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Data Acquisition</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="P08_0_scraper.html">P08 Web Crawler</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="P08_1_web_json.html">Web API: cnyes &amp; 104.com</a></li>
<li class="toctree-l2"><a class="reference internal" href="P08_2_twitter_api.html">Twitter API</a></li>
<li class="toctree-l2"><a class="reference internal" href="P08_3%20tweepy.html">Tweepy for twitter API 2.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="P08_5_cases.html">Scraping cases</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="P08_4_ptt_crawler.html">P08 HTML Parsing - Crawling PTT</a></li>
<li class="toctree-l1"><a class="reference internal" href="P09_database.html">P09 Database</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Text Mining</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../TM/TM01_tokenization.html">TM01 Tokenization</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-9"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../TM/TM01_tokenization%28chi%29.html">Chinese Processing</a></li>





</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../TM/TM02_collocation.html">TM02 Collocation</a></li>

<li class="toctree-l1"><a class="reference internal" href="../TM/TM03_POS%20Tagging.html">TM03 POS Tagging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TM/TM04_IR_search.html">TM04 Feature Selection &amp; IR &amp; Search</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TM/TM05_sentiment.html">TM05 Sentiment analysis</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Machine Learning</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../TM/TM06_Clustering.html">TM06 Clustering</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TM/TM07_embedding_clustering.html">TM07 embedding and clustering</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TM/TM07_2_doc2vec.html">TM07 word2vec vs doc2vec</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TM/TM08_doc_classification.html">TM08 Classification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TM/TM09_BERTopic.html">TM09 Topic Modeling by BERtopic</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TM/TM10_Using_Open_AI.html">TM10 Using Open AI</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Using deep learning</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference external" href="https://colab.research.google.com/drive/1pXfdPEQDY5wDhlzjr867duFsAVAXj5Yz?usp=sharing">Transformer-Clusteirng</a></li>
<li class="toctree-l1"><a class="reference external" href="https://colab.research.google.com/drive/1YD8mjrpEH6-0rYMY0L1xFFKpJ2jGY6nT?usp=share_link">Transformer-Classification</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Compuational Social Science</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../CSS/CSS01_network_analysis.html">CSS01 Network Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CSS/CSS02_Simulation.html">CSS02 Simulation</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Assignments</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../AS/AS01_basic.html">PART I: Trivial Question with AI</a></li>


<li class="toctree-l1"><a class="reference internal" href="../AS/AS02_ptt_jsonl.html">AS02 Reading PTT data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AS/AS02_ptt_jsonl_ans.html">AS02 Reading PTT data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AS/AS02_list_dict_for_if.html">AS02 List-dict-for-if</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AS/AS03_summarize_ptt.html">AS03: Summarizing Data by Pandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AS/AS03_pandas_summarization.html">AS03 Summarize data with Pandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AS/AS04_vis_twitter_api.html">AS04 Twitter API and Pandas Visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AS/AS05_scraping_youtube.html">AS05 Scraping youtube</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AS/AS05_Scraping_youtube_with_chatGPT.html">AS05. Improving Youtube Scraper with ChatGPT</a></li>




<li class="toctree-l1"><a class="reference external" href="https://drive.google.com/file/d/1L9coxxzKsy7_KzrBWno6Jh9zY785AtJB/view?usp=sharing">AS06 Tokenization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AS/AS06_Tokenization.html">AS06 - Tokenization and keywords</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AS/AS07_collocation.html">AS07 Collocation for finding enthusiastic commentors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AS/AS08_clustering_yt_comment.html">AS08 Youtube comment clustering</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AS/AS08_clustering_people.html">AS08 - Clustering Commenters Based on Behavior</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../Resource/video_list.html">Python教學影片</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Resource/IDEs.html">Python開發環境</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://colab.research.google.com/github/p4css/py4css/blob/master/_sources/PSS/P06p2_filter_select_datetime.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onColab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="../_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/p4css/py4css" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="來源儲存庫"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/p4css/py4css/issues/new?title=Issue%20on%20page%20%2FPSS/P06p2_filter_select_datetime.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="開啟議題"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="下載此頁面">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/PSS/P06p2_filter_select_datetime.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="下載原始檔"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="列印成 PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="全螢幕模式"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Pandas: filter, select, and timeline process</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> 目錄 </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#p1-load-data-twitter-account">P1. Load data (twitter account)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#drop-columns">1.1 Drop columns</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#p2-tweets-over-time">P2. Tweets over time</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#convert-str-to-datetime">2.1 Convert str to datetime</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#p3-iterate-each-row-of-dataframe">P3. Iterate each row of dataframe</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#plotting">3.1 Plotting</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#p4-twitter-user-productivity">P4. Twitter User Productivity</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#p5-filter-rows-by-column-value-very-important">P5. Filter rows by column value (Very Important)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#load-data-drug-ill-ad">Load data (drug ill-ad)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#detecting-patterns-in-strings-by-str-contains">5.1  Detecting patterns in strings by <code class="docutils literal notranslate"><span class="pre">str.contains()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#filtered-by-arithemetic-comparison">5.2 Filtered by arithemetic comparison</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#filtered-by-one-of-by-isin">5.3 Filtered by one-of by <code class="docutils literal notranslate"><span class="pre">.isin()</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#p6-plotting">P6. Plotting</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#about-the-matplotlib-resolution">6.1 About the matplotlib resolution</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#plot-with-chinese-font">6.2 Plot with Chinese font</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#p7-pivot-groupby-and-summarize">P7. Pivot: groupby and summarize</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#multiple-factors-to-one-new-column">7.1 Multiple factors to one new column</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#one-column-summarized-to-multiple-columns">7.2 One column summarized to multiple columns</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#multiple-columns-to-multiple-columns-with-different-functions">7.3 Multiple columns to multiple columns with different functions</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="pandas-filter-select-and-timeline-process">
<h1>Pandas: filter, select, and timeline process<a class="headerlink" href="#pandas-filter-select-and-timeline-process" title="Permalink to this headline">#</a></h1>
<section id="p1-load-data-twitter-account">
<h2>P1. Load data (twitter account)<a class="headerlink" href="#p1-load-data-twitter-account" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="n">user_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;https://raw.githubusercontent.com/p4css/py4css/main/data/twitter_user1_hashed.csv&quot;</span><span class="p">)</span>
<span class="n">user_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/Users/jirlong/opt/anaconda3/lib/python3.9/site-packages/pandas/core/computation/expressions.py:21: UserWarning: Pandas requires version &#39;2.8.4&#39; or newer of &#39;numexpr&#39; (version &#39;2.8.1&#39; currently installed).
  from pandas.core.computation.check import NUMEXPR_INSTALLED
/Users/jirlong/opt/anaconda3/lib/python3.9/site-packages/pandas/core/arrays/masked.py:60: UserWarning: Pandas requires version &#39;1.3.6&#39; or newer of &#39;bottleneck&#39; (version &#39;1.3.4&#39; currently installed).
  from pandas.core import (
</pre></div>
</div>
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">HTTPError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="nn">Input In [1],</span> in <span class="ni">&lt;cell line: 2&gt;</span><span class="nt">()</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="ne">----&gt; </span><span class="mi">2</span> <span class="n">user_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;https://raw.githubusercontent.com/p4css/py4css/main/data/twitter_user1_hashed.csv&quot;</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="n">user_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>

<span class="nn">File ~/opt/anaconda3/lib/python3.9/site-packages/pandas/io/parsers/readers.py:1026,</span> in <span class="ni">read_csv</span><span class="nt">(filepath_or_buffer, sep, delimiter, header, names, index_col, usecols, dtype, engine, converters, true_values, false_values, skipinitialspace, skiprows, skipfooter, nrows, na_values, keep_default_na, na_filter, verbose, skip_blank_lines, parse_dates, infer_datetime_format, keep_date_col, date_parser, date_format, dayfirst, cache_dates, iterator, chunksize, compression, thousands, decimal, lineterminator, quotechar, quoting, doublequote, escapechar, comment, encoding, encoding_errors, dialect, on_bad_lines, delim_whitespace, low_memory, memory_map, float_precision, storage_options, dtype_backend)</span>
<span class="g g-Whitespace">   </span><span class="mi">1013</span> <span class="n">kwds_defaults</span> <span class="o">=</span> <span class="n">_refine_defaults_read</span><span class="p">(</span>
<span class="g g-Whitespace">   </span><span class="mi">1014</span>     <span class="n">dialect</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">1015</span>     <span class="n">delimiter</span><span class="p">,</span>
   <span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1022</span>     <span class="n">dtype_backend</span><span class="o">=</span><span class="n">dtype_backend</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">1023</span> <span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1024</span> <span class="n">kwds</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwds_defaults</span><span class="p">)</span>
<span class="ne">-&gt; </span><span class="mi">1026</span> <span class="k">return</span> <span class="n">_read</span><span class="p">(</span><span class="n">filepath_or_buffer</span><span class="p">,</span> <span class="n">kwds</span><span class="p">)</span>

<span class="nn">File ~/opt/anaconda3/lib/python3.9/site-packages/pandas/io/parsers/readers.py:620,</span> in <span class="ni">_read</span><span class="nt">(filepath_or_buffer, kwds)</span>
<span class="g g-Whitespace">    </span><span class="mi">617</span> <span class="n">_validate_names</span><span class="p">(</span><span class="n">kwds</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;names&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
<span class="g g-Whitespace">    </span><span class="mi">619</span> <span class="c1"># Create the parser.</span>
<span class="ne">--&gt; </span><span class="mi">620</span> <span class="n">parser</span> <span class="o">=</span> <span class="n">TextFileReader</span><span class="p">(</span><span class="n">filepath_or_buffer</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">622</span> <span class="k">if</span> <span class="n">chunksize</span> <span class="ow">or</span> <span class="n">iterator</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">623</span>     <span class="k">return</span> <span class="n">parser</span>

<span class="nn">File ~/opt/anaconda3/lib/python3.9/site-packages/pandas/io/parsers/readers.py:1620,</span> in <span class="ni">TextFileReader.__init__</span><span class="nt">(self, f, engine, **kwds)</span>
<span class="g g-Whitespace">   </span><span class="mi">1617</span>     <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">[</span><span class="s2">&quot;has_index_names&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwds</span><span class="p">[</span><span class="s2">&quot;has_index_names&quot;</span><span class="p">]</span>
<span class="g g-Whitespace">   </span><span class="mi">1619</span> <span class="bp">self</span><span class="o">.</span><span class="n">handles</span><span class="p">:</span> <span class="n">IOHandles</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="ne">-&gt; </span><span class="mi">1620</span> <span class="bp">self</span><span class="o">.</span><span class="n">_engine</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_engine</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">engine</span><span class="p">)</span>

<span class="nn">File ~/opt/anaconda3/lib/python3.9/site-packages/pandas/io/parsers/readers.py:1880,</span> in <span class="ni">TextFileReader._make_engine</span><span class="nt">(self, f, engine)</span>
<span class="g g-Whitespace">   </span><span class="mi">1878</span>     <span class="k">if</span> <span class="s2">&quot;b&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">mode</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">1879</span>         <span class="n">mode</span> <span class="o">+=</span> <span class="s2">&quot;b&quot;</span>
<span class="ne">-&gt; </span><span class="mi">1880</span> <span class="bp">self</span><span class="o">.</span><span class="n">handles</span> <span class="o">=</span> <span class="n">get_handle</span><span class="p">(</span>
<span class="g g-Whitespace">   </span><span class="mi">1881</span>     <span class="n">f</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">1882</span>     <span class="n">mode</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">1883</span>     <span class="n">encoding</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;encoding&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
<span class="g g-Whitespace">   </span><span class="mi">1884</span>     <span class="n">compression</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;compression&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
<span class="g g-Whitespace">   </span><span class="mi">1885</span>     <span class="n">memory_map</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;memory_map&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span>
<span class="g g-Whitespace">   </span><span class="mi">1886</span>     <span class="n">is_text</span><span class="o">=</span><span class="n">is_text</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">1887</span>     <span class="n">errors</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;encoding_errors&quot;</span><span class="p">,</span> <span class="s2">&quot;strict&quot;</span><span class="p">),</span>
<span class="g g-Whitespace">   </span><span class="mi">1888</span>     <span class="n">storage_options</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;storage_options&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
<span class="g g-Whitespace">   </span><span class="mi">1889</span> <span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1890</span> <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">handles</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
<span class="g g-Whitespace">   </span><span class="mi">1891</span> <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">handles</span><span class="o">.</span><span class="n">handle</span>

<span class="nn">File ~/opt/anaconda3/lib/python3.9/site-packages/pandas/io/common.py:728,</span> in <span class="ni">get_handle</span><span class="nt">(path_or_buf, mode, encoding, compression, memory_map, is_text, errors, storage_options)</span>
<span class="g g-Whitespace">    </span><span class="mi">725</span>     <span class="n">codecs</span><span class="o">.</span><span class="n">lookup_error</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">727</span> <span class="c1"># open URLs</span>
<span class="ne">--&gt; </span><span class="mi">728</span> <span class="n">ioargs</span> <span class="o">=</span> <span class="n">_get_filepath_or_buffer</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">729</span>     <span class="n">path_or_buf</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">730</span>     <span class="n">encoding</span><span class="o">=</span><span class="n">encoding</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">731</span>     <span class="n">compression</span><span class="o">=</span><span class="n">compression</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">732</span>     <span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">733</span>     <span class="n">storage_options</span><span class="o">=</span><span class="n">storage_options</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">734</span> <span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">736</span> <span class="n">handle</span> <span class="o">=</span> <span class="n">ioargs</span><span class="o">.</span><span class="n">filepath_or_buffer</span>
<span class="g g-Whitespace">    </span><span class="mi">737</span> <span class="n">handles</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">BaseBuffer</span><span class="p">]</span>

<span class="nn">File ~/opt/anaconda3/lib/python3.9/site-packages/pandas/io/common.py:384,</span> in <span class="ni">_get_filepath_or_buffer</span><span class="nt">(filepath_or_buffer, encoding, compression, mode, storage_options)</span>
<span class="g g-Whitespace">    </span><span class="mi">382</span> <span class="c1"># assuming storage_options is to be interpreted as headers</span>
<span class="g g-Whitespace">    </span><span class="mi">383</span> <span class="n">req_info</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">Request</span><span class="p">(</span><span class="n">filepath_or_buffer</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">storage_options</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">384</span> <span class="k">with</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">req_info</span><span class="p">)</span> <span class="k">as</span> <span class="n">req</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">385</span>     <span class="n">content_encoding</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Content-Encoding&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">386</span>     <span class="k">if</span> <span class="n">content_encoding</span> <span class="o">==</span> <span class="s2">&quot;gzip&quot;</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">387</span>         <span class="c1"># Override compression based on Content-Encoding header</span>

<span class="nn">File ~/opt/anaconda3/lib/python3.9/site-packages/pandas/io/common.py:289,</span> in <span class="ni">urlopen</span><span class="nt">(*args, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">283</span><span class="w"> </span><span class="sd">&quot;&quot;&quot;</span>
<span class="g g-Whitespace">    </span><span class="mi">284</span><span class="sd"> Lazy-import wrapper for stdlib urlopen, as that imports a big chunk of</span>
<span class="g g-Whitespace">    </span><span class="mi">285</span><span class="sd"> the stdlib.</span>
<span class="g g-Whitespace">    </span><span class="mi">286</span><span class="sd"> &quot;&quot;&quot;</span>
<span class="g g-Whitespace">    </span><span class="mi">287</span> <span class="kn">import</span> <span class="nn">urllib.request</span>
<span class="ne">--&gt; </span><span class="mi">289</span> <span class="k">return</span> <span class="n">urllib</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<span class="nn">File ~/opt/anaconda3/lib/python3.9/urllib/request.py:214,</span> in <span class="ni">urlopen</span><span class="nt">(url, data, timeout, cafile, capath, cadefault, context)</span>
<span class="g g-Whitespace">    </span><span class="mi">212</span> <span class="k">else</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">213</span>     <span class="n">opener</span> <span class="o">=</span> <span class="n">_opener</span>
<span class="ne">--&gt; </span><span class="mi">214</span> <span class="k">return</span> <span class="n">opener</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">timeout</span><span class="p">)</span>

<span class="nn">File ~/opt/anaconda3/lib/python3.9/urllib/request.py:523,</span> in <span class="ni">OpenerDirector.open</span><span class="nt">(self, fullurl, data, timeout)</span>
<span class="g g-Whitespace">    </span><span class="mi">521</span> <span class="k">for</span> <span class="n">processor</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">protocol</span><span class="p">,</span> <span class="p">[]):</span>
<span class="g g-Whitespace">    </span><span class="mi">522</span>     <span class="n">meth</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">processor</span><span class="p">,</span> <span class="n">meth_name</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">523</span>     <span class="n">response</span> <span class="o">=</span> <span class="n">meth</span><span class="p">(</span><span class="n">req</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">525</span> <span class="k">return</span> <span class="n">response</span>

<span class="nn">File ~/opt/anaconda3/lib/python3.9/urllib/request.py:632,</span> in <span class="ni">HTTPErrorProcessor.http_response</span><span class="nt">(self, request, response)</span>
<span class="g g-Whitespace">    </span><span class="mi">629</span> <span class="c1"># According to RFC 2616, &quot;2xx&quot; code indicates that the client&#39;s</span>
<span class="g g-Whitespace">    </span><span class="mi">630</span> <span class="c1"># request was successfully received, understood, and accepted.</span>
<span class="g g-Whitespace">    </span><span class="mi">631</span> <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="mi">200</span> <span class="o">&lt;=</span> <span class="n">code</span> <span class="o">&lt;</span> <span class="mi">300</span><span class="p">):</span>
<span class="ne">--&gt; </span><span class="mi">632</span>     <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">633</span>         <span class="s1">&#39;http&#39;</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="n">code</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">hdrs</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">635</span> <span class="k">return</span> <span class="n">response</span>

<span class="nn">File ~/opt/anaconda3/lib/python3.9/urllib/request.py:561,</span> in <span class="ni">OpenerDirector.error</span><span class="nt">(self, proto, *args)</span>
<span class="g g-Whitespace">    </span><span class="mi">559</span> <span class="k">if</span> <span class="n">http_err</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">560</span>     <span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="nb">dict</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">,</span> <span class="s1">&#39;http_error_default&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">orig_args</span>
<span class="ne">--&gt; </span><span class="mi">561</span>     <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_chain</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>

<span class="nn">File ~/opt/anaconda3/lib/python3.9/urllib/request.py:494,</span> in <span class="ni">OpenerDirector._call_chain</span><span class="nt">(self, chain, kind, meth_name, *args)</span>
<span class="g g-Whitespace">    </span><span class="mi">492</span> <span class="k">for</span> <span class="n">handler</span> <span class="ow">in</span> <span class="n">handlers</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">493</span>     <span class="n">func</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">handler</span><span class="p">,</span> <span class="n">meth_name</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">494</span>     <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">495</span>     <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">496</span>         <span class="k">return</span> <span class="n">result</span>

<span class="nn">File ~/opt/anaconda3/lib/python3.9/urllib/request.py:641,</span> in <span class="ni">HTTPDefaultErrorHandler.http_error_default</span><span class="nt">(self, req, fp, code, msg, hdrs)</span>
<span class="g g-Whitespace">    </span><span class="mi">640</span> <span class="k">def</span> <span class="nf">http_error_default</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">req</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">code</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">hdrs</span><span class="p">):</span>
<span class="ne">--&gt; </span><span class="mi">641</span>     <span class="k">raise</span> <span class="n">HTTPError</span><span class="p">(</span><span class="n">req</span><span class="o">.</span><span class="n">full_url</span><span class="p">,</span> <span class="n">code</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">hdrs</span><span class="p">,</span> <span class="n">fp</span><span class="p">)</span>

<span class="ne">HTTPError</span>: HTTP Error 404: Not Found
</pre></div>
</div>
</div>
</div>
<section id="drop-columns">
<h3>1.1 Drop columns<a class="headerlink" href="#drop-columns" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">user_df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;user_reported_location&#39;</span><span class="p">,</span> <span class="s1">&#39;user_profile_description&#39;</span><span class="p">,</span> <span class="s1">&#39;user_profile_url&#39;</span><span class="p">],</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  
<span class="n">user_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>userid</th>
      <th>user_display_name</th>
      <th>user_screen_name</th>
      <th>follower_count</th>
      <th>following_count</th>
      <th>account_creation_date</th>
      <th>account_language</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>vMm2zemFOF7kmXoDyX24Bo+TorqhNutpZlATYyxsE=</td>
      <td>vMm2zemFOF7kmXoDyX24Bo+TorqhNutpZlATYyxsE=</td>
      <td>vMm2zemFOF7kmXoDyX24Bo+TorqhNutpZlATYyxsE=</td>
      <td>1</td>
      <td>52</td>
      <td>2017-08-30</td>
      <td>zh-cn</td>
    </tr>
    <tr>
      <th>1</th>
      <td>919755217121316864</td>
      <td>ailaiyi5</td>
      <td>wuming11xia</td>
      <td>0</td>
      <td>0</td>
      <td>2017-10-16</td>
      <td>zh-cn</td>
    </tr>
    <tr>
      <th>2</th>
      <td>747292706536226816</td>
      <td>牛小牛</td>
      <td>gurevadona88</td>
      <td>23949</td>
      <td>52</td>
      <td>2016-06-27</td>
      <td>zh-cn</td>
    </tr>
    <tr>
      <th>3</th>
      <td>q2SMGvHasu+nugbpNMDCjr2qlZp3FCiGYDLht+gW5pw=</td>
      <td>q2SMGvHasu+nugbpNMDCjr2qlZp3FCiGYDLht+gW5pw=</td>
      <td>q2SMGvHasu+nugbpNMDCjr2qlZp3FCiGYDLht+gW5pw=</td>
      <td>17</td>
      <td>34</td>
      <td>2016-08-08</td>
      <td>es</td>
    </tr>
    <tr>
      <th>4</th>
      <td>907348345563303940</td>
      <td>lishuishi</td>
      <td>lishuishi</td>
      <td>0</td>
      <td>0</td>
      <td>2017-09-11</td>
      <td>zh-tw</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">user_df</span><span class="o">.</span><span class="n">columns</span>
<span class="n">user_df</span><span class="o">.</span><span class="n">dtypes</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>userid                   object
user_display_name        object
user_screen_name         object
follower_count            int64
following_count           int64
account_creation_date    object
account_language         object
dtype: object
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="p2-tweets-over-time">
<h2>P2. Tweets over time<a class="headerlink" href="#p2-tweets-over-time" title="Permalink to this headline">#</a></h2>
<section id="convert-str-to-datetime">
<h3>2.1 Convert str to datetime<a class="headerlink" href="#convert-str-to-datetime" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p><a class="reference external" href="https://datatofish.com/strings-to-datetime-pandas/">https://datatofish.com/strings-to-datetime-pandas/</a></p></li>
<li><p><a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.Series.dt.to_period.html">https://pandas.pydata.org/docs/reference/api/pandas.Series.dt.to_period.html</a></p></li>
<li><p><a class="reference external" href="https://pandas.pydata.org/docs/user_guide/timeseries.html#timeseries-offset-aliases">https://pandas.pydata.org/docs/user_guide/timeseries.html#timeseries-offset-aliases</a></p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">user_df</span><span class="p">[</span><span class="s1">&#39;account_creation_date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">user_df</span><span class="p">[</span><span class="s1">&#39;account_creation_date&#39;</span><span class="p">],</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">user_df</span><span class="o">.</span><span class="n">dtypes</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>userid                           object
user_display_name                object
user_screen_name                 object
follower_count                    int64
following_count                   int64
account_creation_date    datetime64[ns]
account_language                 object
dtype: object
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># drug_df.groupby(&#39;pubMediaType&#39;)[&#39;pname&#39;, &#39;agency&#39;].count()</span>
<span class="n">user_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;account_creation_date&#39;</span><span class="p">)[</span><span class="s1">&#39;userid&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>account_creation_date
2008-05-16    1
2008-07-31    1
2008-11-19    1
2009-01-29    1
2009-02-03    1
             ..
2019-04-28    1
2019-04-29    2
2019-05-03    8
2019-05-05    2
2019-05-07    2
Name: userid, Length: 289, dtype: int64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">user_df</span><span class="p">[</span><span class="s1">&#39;account_creation_year&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">user_df</span><span class="p">[</span><span class="s1">&#39;account_creation_date&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">x</span><span class="o">.</span><span class="n">year</span><span class="p">)</span>
<span class="n">user_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>userid</th>
      <th>user_display_name</th>
      <th>user_screen_name</th>
      <th>follower_count</th>
      <th>following_count</th>
      <th>account_creation_date</th>
      <th>account_language</th>
      <th>account_creation_year</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>vMm2zemFOF7kmXoDyX24Bo+TorqhNutpZlATYyxsE=</td>
      <td>vMm2zemFOF7kmXoDyX24Bo+TorqhNutpZlATYyxsE=</td>
      <td>vMm2zemFOF7kmXoDyX24Bo+TorqhNutpZlATYyxsE=</td>
      <td>1</td>
      <td>52</td>
      <td>2017-08-30</td>
      <td>zh-cn</td>
      <td>2017</td>
    </tr>
    <tr>
      <th>1</th>
      <td>919755217121316864</td>
      <td>ailaiyi5</td>
      <td>wuming11xia</td>
      <td>0</td>
      <td>0</td>
      <td>2017-10-16</td>
      <td>zh-cn</td>
      <td>2017</td>
    </tr>
    <tr>
      <th>2</th>
      <td>747292706536226816</td>
      <td>牛小牛</td>
      <td>gurevadona88</td>
      <td>23949</td>
      <td>52</td>
      <td>2016-06-27</td>
      <td>zh-cn</td>
      <td>2016</td>
    </tr>
    <tr>
      <th>3</th>
      <td>q2SMGvHasu+nugbpNMDCjr2qlZp3FCiGYDLht+gW5pw=</td>
      <td>q2SMGvHasu+nugbpNMDCjr2qlZp3FCiGYDLht+gW5pw=</td>
      <td>q2SMGvHasu+nugbpNMDCjr2qlZp3FCiGYDLht+gW5pw=</td>
      <td>17</td>
      <td>34</td>
      <td>2016-08-08</td>
      <td>es</td>
      <td>2016</td>
    </tr>
    <tr>
      <th>4</th>
      <td>907348345563303940</td>
      <td>lishuishi</td>
      <td>lishuishi</td>
      <td>0</td>
      <td>0</td>
      <td>2017-09-11</td>
      <td>zh-tw</td>
      <td>2017</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># df[&#39;account_creation_ym&#39;] = df[&#39;account_creation_date&#39;].apply(lambda x:x.floor(&quot;M&quot;))</span>
<span class="c1"># user_df[&#39;account_creation_ym&#39;] = user_df[&#39;account_creation_date&#39;].dt.to_period(&quot;M&quot;)</span>
<span class="n">user_df</span><span class="p">[</span><span class="s1">&#39;account_creation_ym&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">user_df</span><span class="p">[</span><span class="s1">&#39;account_creation_date&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">x</span><span class="o">.</span><span class="n">to_period</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">))</span>
<span class="n">user_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>userid</th>
      <th>user_display_name</th>
      <th>user_screen_name</th>
      <th>follower_count</th>
      <th>following_count</th>
      <th>account_creation_date</th>
      <th>account_language</th>
      <th>account_creation_year</th>
      <th>account_creation_ym</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>vMm2zemFOF7kmXoDyX24Bo+TorqhNutpZlATYyxsE=</td>
      <td>vMm2zemFOF7kmXoDyX24Bo+TorqhNutpZlATYyxsE=</td>
      <td>vMm2zemFOF7kmXoDyX24Bo+TorqhNutpZlATYyxsE=</td>
      <td>1</td>
      <td>52</td>
      <td>2017-08-30</td>
      <td>zh-cn</td>
      <td>2017</td>
      <td>2017-08</td>
    </tr>
    <tr>
      <th>1</th>
      <td>919755217121316864</td>
      <td>ailaiyi5</td>
      <td>wuming11xia</td>
      <td>0</td>
      <td>0</td>
      <td>2017-10-16</td>
      <td>zh-cn</td>
      <td>2017</td>
      <td>2017-10</td>
    </tr>
    <tr>
      <th>2</th>
      <td>747292706536226816</td>
      <td>牛小牛</td>
      <td>gurevadona88</td>
      <td>23949</td>
      <td>52</td>
      <td>2016-06-27</td>
      <td>zh-cn</td>
      <td>2016</td>
      <td>2016-06</td>
    </tr>
    <tr>
      <th>3</th>
      <td>q2SMGvHasu+nugbpNMDCjr2qlZp3FCiGYDLht+gW5pw=</td>
      <td>q2SMGvHasu+nugbpNMDCjr2qlZp3FCiGYDLht+gW5pw=</td>
      <td>q2SMGvHasu+nugbpNMDCjr2qlZp3FCiGYDLht+gW5pw=</td>
      <td>17</td>
      <td>34</td>
      <td>2016-08-08</td>
      <td>es</td>
      <td>2016</td>
      <td>2016-08</td>
    </tr>
    <tr>
      <th>4</th>
      <td>907348345563303940</td>
      <td>lishuishi</td>
      <td>lishuishi</td>
      <td>0</td>
      <td>0</td>
      <td>2017-09-11</td>
      <td>zh-tw</td>
      <td>2017</td>
      <td>2017-09</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sum_df</span> <span class="o">=</span> <span class="n">user_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;account_creation_ym&#39;</span><span class="p">)[</span><span class="s1">&#39;userid&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;n&#39;</span><span class="p">)</span>
<span class="nb">type</span><span class="p">(</span><span class="n">sum_df</span><span class="p">)</span>
<span class="n">sum_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>account_creation_ym</th>
      <th>n</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2008-05</td>
      <td>1</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2008-07</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2008-11</td>
      <td>1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2009-01</td>
      <td>1</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2009-02</td>
      <td>1</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>98</th>
      <td>2019-01</td>
      <td>8</td>
    </tr>
    <tr>
      <th>99</th>
      <td>2019-02</td>
      <td>12</td>
    </tr>
    <tr>
      <th>100</th>
      <td>2019-03</td>
      <td>4</td>
    </tr>
    <tr>
      <th>101</th>
      <td>2019-04</td>
      <td>4</td>
    </tr>
    <tr>
      <th>102</th>
      <td>2019-05</td>
      <td>12</td>
    </tr>
  </tbody>
</table>
<p>103 rows × 2 columns</p>
</div></div></div>
</div>
</section>
</section>
<section id="p3-iterate-each-row-of-dataframe">
<h2>P3. Iterate each row of dataframe<a class="headerlink" href="#p3-iterate-each-row-of-dataframe" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">sum_df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;account_creation_ym&#39;</span><span class="p">],</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;n&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2008-05 1
2008-07 1
2008-11 1
2009-01 1
2009-02 1
2009-03 1
2009-04 4
2009-05 1
2009-06 1
2009-07 4
2009-09 5
2009-10 1
2009-12 1
2010-01 2
2010-02 1
2010-03 2
2010-04 2
2010-06 4
2010-08 1
2010-09 1
2010-10 1
2010-11 2
2010-12 1
2011-01 1
2011-02 1
2011-03 3
2011-05 1
2011-06 2
2011-07 1
2011-08 4
2011-09 2
2011-11 3
2011-12 2
2012-01 2
2012-02 1
2012-03 2
2012-04 2
2012-06 1
2012-07 1
2012-08 2
2012-11 3
2012-12 3
2013-01 3
2013-02 4
2013-03 20
2013-04 1
2013-06 2
2013-07 2
2013-08 1
2013-09 1
2013-10 3
2013-11 3
2013-12 2
2014-01 1
2014-02 2
2014-03 1
2014-04 1
2014-05 3
2014-08 2
2014-10 1
2014-11 1
2015-01 3
2015-02 1
2015-04 2
2015-06 1
2015-07 3
2015-09 1
2015-10 5
2015-11 7
2015-12 6
2016-01 4
2016-02 3
2016-04 2
2016-05 1
2016-06 41
2016-07 9
2016-08 7
2016-09 1
2016-10 4
2016-11 1
2017-01 1
2017-02 2
2017-06 4
2017-07 11
2017-08 237
2017-09 28
2017-10 80
2017-11 47
2017-12 6
2018-01 1
2018-02 2
2018-03 9
2018-04 7
2018-07 15
2018-08 1
2018-10 8
2018-11 2
2018-12 10
2019-01 8
2019-02 12
2019-03 4
2019-04 4
2019-05 12
</pre></div>
</div>
</div>
</div>
<section id="plotting">
<h3>3.1 Plotting<a class="headerlink" href="#plotting" title="Permalink to this headline">#</a></h3>
<p><a class="reference external" href="https://www.w3schools.com/python/pandas/pandas_plotting.asp">https://www.w3schools.com/python/pandas/pandas_plotting.asp</a></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># %matplotlib widget</span>
<span class="c1"># %matplotlib inline</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">sum_df</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;account_creation_ym&#39;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;n&#39;</span><span class="p">)</span>

<span class="c1"># plt.show()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;fig.pdf&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/7f75f50a008bdc80aa8f8ce4b9b01f5ecfbad34140faecfb257a5cb6c39a8976.png" src="../_images/7f75f50a008bdc80aa8f8ce4b9b01f5ecfbad34140faecfb257a5cb6c39a8976.png" />
</div>
</div>
</section>
</section>
<section id="p4-twitter-user-productivity">
<h2>P4. Twitter User Productivity<a class="headerlink" href="#p4-twitter-user-productivity" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">lang_count</span> <span class="o">=</span> <span class="n">user_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;account_language&#39;</span><span class="p">)[</span><span class="s2">&quot;userid&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">toplot</span> <span class="o">=</span> <span class="n">lang_count</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;n&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">toplot</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;account_language&quot;</span><span class="p">)</span>
<span class="n">toplot</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s2">&quot;barh&quot;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;account_language&quot;</span><span class="p">)</span>
<span class="n">toplot</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">barh</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">&quot;account_language&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">invert_yaxis</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/1c7101013436b302131b7957f2887564d47c5afa47b876db202bcb416540f5a5.png" src="../_images/1c7101013436b302131b7957f2887564d47c5afa47b876db202bcb416540f5a5.png" />
<img alt="../_images/4d665eb6d76dc2382ed6f2863c0f9e3edbe04eb275fd515f5e34ddb5426e50ca.png" src="../_images/4d665eb6d76dc2382ed6f2863c0f9e3edbe04eb275fd515f5e34ddb5426e50ca.png" />
<img alt="../_images/790a18c977e58cc0601f8006e3e90c4bdf4a64b04183ae5b2baf49d2b6b570f9.png" src="../_images/790a18c977e58cc0601f8006e3e90c4bdf4a64b04183ae5b2baf49d2b6b570f9.png" />
</div>
</div>
</section>
<section id="p5-filter-rows-by-column-value-very-important">
<h2>P5. Filter rows by column value (Very Important)<a class="headerlink" href="#p5-filter-rows-by-column-value-very-important" title="Permalink to this headline">#</a></h2>
<section id="load-data-drug-ill-ad">
<h3>Load data (drug ill-ad)<a class="headerlink" href="#load-data-drug-ill-ad" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="n">drug_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/p4css/py4css/main/data/drug_156_2.csv&#39;</span><span class="p">)</span>
<span class="c1"># drug_df</span>
<span class="n">drug_df</span><span class="o">.</span><span class="n">columns</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Index([&#39;違規產品名稱&#39;, &#39;違規廠商名稱或負責人&#39;, &#39;處分機關&#39;, &#39;處分日期&#39;, &#39;處分法條&#39;, &#39;違規情節&#39;, &#39;刊播日期&#39;,
       &#39;刊播媒體類別&#39;, &#39;刊播媒體&#39;, &#39;查處情形&#39;],
      dtype=&#39;object&#39;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">drug_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>違規產品名稱</th>
      <th>違規廠商名稱或負責人</th>
      <th>處分機關</th>
      <th>處分日期</th>
      <th>處分法條</th>
      <th>違規情節</th>
      <th>刊播日期</th>
      <th>刊播媒體類別</th>
      <th>刊播媒體</th>
      <th>查處情形</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>維他肝</td>
      <td>豐怡生化科技股份有限公司/朱O</td>
      <td>NaN</td>
      <td>03 31 2022 12:00AM</td>
      <td>NaN</td>
      <td>廣告內容誇大不實</td>
      <td>02 2 2022 12:00AM</td>
      <td>廣播電台</td>
      <td>噶瑪蘭廣播電台股份有限公司</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>現貨澳洲Swisse ULTIBOOST維他命D片calcium vitamin VITAM...</td>
      <td>張O雯/張O雯</td>
      <td>NaN</td>
      <td>01 21 2022 12:00AM</td>
      <td>NaN</td>
      <td>廣告違規</td>
      <td>11 30 2021 12:00AM</td>
      <td>網路</td>
      <td>蝦皮購物</td>
      <td>輔導結案</td>
    </tr>
    <tr>
      <th>2</th>
      <td>✈日本 代購 參天製藥 處方簽點眼液</td>
      <td>蘇O涵/蘇O涵</td>
      <td>NaN</td>
      <td>01 25 2022 12:00AM</td>
      <td>NaN</td>
      <td>無照藥商</td>
      <td>08 27 2021 12:00AM</td>
      <td>網路</td>
      <td>蝦皮購物</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>✈日本 代購 TSUMURA 中將湯 24天包裝</td>
      <td>蘇O涵/蘇O涵</td>
      <td>NaN</td>
      <td>01 25 2022 12:00AM</td>
      <td>NaN</td>
      <td>無照藥商</td>
      <td>08 27 2021 12:00AM</td>
      <td>網路</td>
      <td>蝦皮購物</td>
      <td>輔導結案</td>
    </tr>
    <tr>
      <th>4</th>
      <td>_Salty.shop 日本代購 樂敦小花</td>
      <td>曾O嫺/曾O嫺</td>
      <td>NaN</td>
      <td>02 17 2022 12:00AM</td>
      <td>藥事法第27條</td>
      <td>無照藥商</td>
      <td>12 6 2021 12:00AM</td>
      <td>網路</td>
      <td>蝦皮購物</td>
      <td>處分結案</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2967</th>
      <td>*健人館* 千鶴薄荷棒11g*2個</td>
      <td>新東海藥局/ O聰敏</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>藥事法第27條</td>
      <td>標示內容與規定不符</td>
      <td>05 6 2020 12:00AM</td>
      <td>網路</td>
      <td>NaN</td>
      <td>處分結案</td>
    </tr>
    <tr>
      <th>2968</th>
      <td>（現貨）GO LIVER DETOX 高之源 護肝排毒膠囊 120粒</td>
      <td>連O毅/連O毅</td>
      <td>NaN</td>
      <td>06 30 2020 12:00AM</td>
      <td>藥事法第27條</td>
      <td>無照藥商</td>
      <td>02 5 2020 12:00AM</td>
      <td>網路</td>
      <td>蝦皮購物</td>
      <td>處分結案</td>
    </tr>
    <tr>
      <th>2969</th>
      <td>日本帶回樂敦小花新鮮貨</td>
      <td>張O萍/張O萍</td>
      <td>NaN</td>
      <td>06 23 2020 12:00AM</td>
      <td>NaN</td>
      <td>難以判定產品屬性</td>
      <td>03 10 2020 12:00AM</td>
      <td>網路</td>
      <td>蝦皮購物</td>
      <td>輔導結案</td>
    </tr>
    <tr>
      <th>2970</th>
      <td>全新 洗眼杯 可平信 洗眼 小林製藥 小花 ROHTO Lycee 可搭配生理食鹽水 空汙 ...</td>
      <td>盧O/盧O</td>
      <td>NaN</td>
      <td>09 4 2020 12:00AM</td>
      <td>NaN</td>
      <td>無照藥商</td>
      <td>03 10 2020 12:00AM</td>
      <td>網路</td>
      <td>蝦皮購物</td>
      <td>輔導結案</td>
    </tr>
    <tr>
      <th>2971</th>
      <td>0.9%生理食鹽水 20ml 預購最低價 每人限購2盒</td>
      <td>張O軒/張O軒</td>
      <td>NaN</td>
      <td>06 11 2020 12:00AM</td>
      <td>NaN</td>
      <td>無照藥商</td>
      <td>03 31 2020 12:00AM</td>
      <td>網路</td>
      <td>蝦皮購物</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
<p>2972 rows × 10 columns</p>
</div></div></div>
</div>
</section>
<section id="detecting-patterns-in-strings-by-str-contains">
<h3>5.1  Detecting patterns in strings by <code class="docutils literal notranslate"><span class="pre">str.contains()</span></code><a class="headerlink" href="#detecting-patterns-in-strings-by-str-contains" title="Permalink to this headline">#</a></h3>
<p><a class="reference external" href="https://www.geeksforgeeks.org/python-pandas-series-str-contains/">Python | Pandas Series.str.contains() - GeeksforGeeks</a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pat</span> <span class="o">=</span> <span class="s1">&#39;假[\s\S]{0,6}新聞|假[\s\S]{0,6}消息|不實[\s\S]{0,6}新聞|不實[\s\S]{0,6}消息|假[\s\S]{0,6}訊息|不實[\s\S]{0,6}訊息&#39;</span>
<span class="n">filtered_comment</span> <span class="o">=</span> <span class="n">comment</span><span class="p">[</span><span class="n">comment</span><span class="p">[</span><span class="s1">&#39;ccontent&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">pat</span><span class="o">=</span><span class="n">pat</span><span class="p">,</span> <span class="n">na</span><span class="o">=</span><span class="kc">False</span><span class="p">)]</span>
</pre></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pat</span> <span class="o">=</span> <span class="s1">&#39;代購|帶回&#39;</span>
<span class="n">filtered_drug_df</span> <span class="o">=</span> <span class="n">drug_df</span><span class="p">[</span><span class="n">drug_df</span><span class="p">[</span><span class="s1">&#39;違規產品名稱&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">pat</span><span class="o">=</span><span class="n">pat</span><span class="p">,</span> <span class="n">na</span><span class="o">=</span><span class="kc">False</span><span class="p">)]</span>
<span class="n">filtered_drug_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>違規產品名稱</th>
      <th>違規廠商名稱或負責人</th>
      <th>處分機關</th>
      <th>處分日期</th>
      <th>處分法條</th>
      <th>違規情節</th>
      <th>刊播日期</th>
      <th>刊播媒體類別</th>
      <th>刊播媒體</th>
      <th>查處情形</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2</th>
      <td>✈日本 代購 參天製藥 處方簽點眼液</td>
      <td>蘇O涵/蘇O涵</td>
      <td>NaN</td>
      <td>01 25 2022 12:00AM</td>
      <td>NaN</td>
      <td>無照藥商</td>
      <td>08 27 2021 12:00AM</td>
      <td>網路</td>
      <td>蝦皮購物</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>✈日本 代購 TSUMURA 中將湯 24天包裝</td>
      <td>蘇O涵/蘇O涵</td>
      <td>NaN</td>
      <td>01 25 2022 12:00AM</td>
      <td>NaN</td>
      <td>無照藥商</td>
      <td>08 27 2021 12:00AM</td>
      <td>網路</td>
      <td>蝦皮購物</td>
      <td>輔導結案</td>
    </tr>
    <tr>
      <th>4</th>
      <td>_Salty.shop 日本代購 樂敦小花</td>
      <td>曾O嫺/曾O嫺</td>
      <td>NaN</td>
      <td>02 17 2022 12:00AM</td>
      <td>藥事法第27條</td>
      <td>無照藥商</td>
      <td>12 6 2021 12:00AM</td>
      <td>網路</td>
      <td>蝦皮購物</td>
      <td>處分結案</td>
    </tr>
    <tr>
      <th>9</th>
      <td>現貨正品 Eve 快速出貨 日本代購 白兔60 藍兔 40 eve 金兔 EVE 兔子 娃娃...</td>
      <td>張O恩/張O恩</td>
      <td>NaN</td>
      <td>03 4 2022 12:00AM</td>
      <td>NaN</td>
      <td>無照藥商</td>
      <td>12 21 2021 12:00AM</td>
      <td>網路</td>
      <td>蝦皮拍賣網站</td>
      <td>輔導結案</td>
    </tr>
    <tr>
      <th>18</th>
      <td>[海外代購]纈草根膠囊-120毫克-240粒-睡眠</td>
      <td>江O君/江O君</td>
      <td>NaN</td>
      <td>03 15 2022 12:00AM</td>
      <td>NaN</td>
      <td>無照藥商</td>
      <td>08 2 2021 12:00AM</td>
      <td>網路</td>
      <td>蝦皮購物</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2947</th>
      <td>「泰國代購🇹🇭」泰國🇹🇭Hirudoid強效去疤膏（預購）</td>
      <td>魏O芝/魏O芝</td>
      <td>NaN</td>
      <td>06 5 2020 12:00AM</td>
      <td>藥事法第27條</td>
      <td>無照藥商</td>
      <td>12 17 2019 12:00AM</td>
      <td>網路</td>
      <td>蝦皮購物</td>
      <td>處分結案</td>
    </tr>
    <tr>
      <th>2948</th>
      <td>eBuy美國代購美国正品GNC银杏叶精华提高增强记忆力预防老年痴呆补脑健脑</td>
      <td>蕭O雄/蕭O雄</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>無照藥商</td>
      <td>03 9 2020 12:00AM</td>
      <td>網路</td>
      <td>蝦皮購物</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2957</th>
      <td>【現貨】H&amp;H 久光 Hisamitsu酸痛舒緩貼布 120枚 140枚 痠痛 舒緩 貼布 ...</td>
      <td>胡OO/胡OO</td>
      <td>NaN</td>
      <td>07 16 2020 12:00AM</td>
      <td>藥事法第27條</td>
      <td>無照藥商</td>
      <td>02 27 2020 12:00AM</td>
      <td>網路</td>
      <td>蝦皮購物</td>
      <td>處分結案</td>
    </tr>
    <tr>
      <th>2965</th>
      <td>美國代購 ，9:5%折扣落建髮洗，兩款都有</td>
      <td>陳O鵬/陳O鵬</td>
      <td>NaN</td>
      <td>07 16 2020 12:00AM</td>
      <td>NaN</td>
      <td>藥品未申請查驗登記</td>
      <td>04 16 2020 12:00AM</td>
      <td>網路</td>
      <td>樂購蝦皮股份有限公司</td>
      <td>輔導結案</td>
    </tr>
    <tr>
      <th>2969</th>
      <td>日本帶回樂敦小花新鮮貨</td>
      <td>張O萍/張O萍</td>
      <td>NaN</td>
      <td>06 23 2020 12:00AM</td>
      <td>NaN</td>
      <td>難以判定產品屬性</td>
      <td>03 10 2020 12:00AM</td>
      <td>網路</td>
      <td>蝦皮購物</td>
      <td>輔導結案</td>
    </tr>
  </tbody>
</table>
<p>489 rows × 10 columns</p>
</div></div></div>
</div>
</section>
<section id="filtered-by-arithemetic-comparison">
<h3>5.2 Filtered by arithemetic comparison<a class="headerlink" href="#filtered-by-arithemetic-comparison" title="Permalink to this headline">#</a></h3>
<p><a class="reference external" href="https://www.geeksforgeeks.org/ways-to-filter-pandas-dataframe-by-column-values/">https://www.geeksforgeeks.org/ways-to-filter-pandas-dataframe-by-column-values/</a></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">media_count</span> <span class="o">=</span> <span class="n">drug_df</span><span class="p">[</span><span class="s2">&quot;刊播媒體&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">media_count</span><span class="p">))</span>
<span class="n">media_count</span> <span class="o">=</span> <span class="n">media_count</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;n&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;index&quot;</span><span class="p">:</span> <span class="s2">&quot;media&quot;</span><span class="p">})</span>
<span class="n">media_count</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.series.Series&#39;&gt;
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>media</th>
      <th>n</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>蝦皮購物</td>
      <td>523</td>
    </tr>
    <tr>
      <th>1</th>
      <td>露天拍賣</td>
      <td>443</td>
    </tr>
    <tr>
      <th>2</th>
      <td>PChome商店街</td>
      <td>164</td>
    </tr>
    <tr>
      <th>3</th>
      <td>蝦皮拍賣</td>
      <td>158</td>
    </tr>
    <tr>
      <th>4</th>
      <td>露天拍賣網站</td>
      <td>119</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>415</th>
      <td>臺中群健有線電視</td>
      <td>1</td>
    </tr>
    <tr>
      <th>416</th>
      <td>世新有線電視股份有限公司</td>
      <td>1</td>
    </tr>
    <tr>
      <th>417</th>
      <td>群健有線電視</td>
      <td>1</td>
    </tr>
    <tr>
      <th>418</th>
      <td>金頻道有線電視事業股份有限公司</td>
      <td>1</td>
    </tr>
    <tr>
      <th>419</th>
      <td>吉隆有線電視股份有限公司、吉隆有線電視股份有限公司</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
<p>420 rows × 2 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">media_count</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">media_count</span><span class="p">[</span><span class="s2">&quot;n&quot;</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">5</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>media</th>
      <th>n</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>蝦皮購物</td>
      <td>523</td>
    </tr>
    <tr>
      <th>1</th>
      <td>露天拍賣</td>
      <td>443</td>
    </tr>
    <tr>
      <th>2</th>
      <td>PChome商店街</td>
      <td>164</td>
    </tr>
    <tr>
      <th>3</th>
      <td>蝦皮拍賣</td>
      <td>158</td>
    </tr>
    <tr>
      <th>4</th>
      <td>露天拍賣網站</td>
      <td>119</td>
    </tr>
    <tr>
      <th>5</th>
      <td>蝦皮拍賣網站</td>
      <td>98</td>
    </tr>
    <tr>
      <th>6</th>
      <td>露天</td>
      <td>63</td>
    </tr>
    <tr>
      <th>7</th>
      <td>奇摩拍賣網站</td>
      <td>62</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Yahoo!奇摩拍賣</td>
      <td>60</td>
    </tr>
    <tr>
      <th>9</th>
      <td>奇摩拍賣</td>
      <td>57</td>
    </tr>
    <tr>
      <th>10</th>
      <td>蝦皮</td>
      <td>39</td>
    </tr>
    <tr>
      <th>11</th>
      <td>YAHOO！奇摩拍賣</td>
      <td>31</td>
    </tr>
    <tr>
      <th>12</th>
      <td>臉書</td>
      <td>20</td>
    </tr>
    <tr>
      <th>13</th>
      <td>YAHOO奇摩拍賣</td>
      <td>19</td>
    </tr>
    <tr>
      <th>14</th>
      <td>YAHOO</td>
      <td>18</td>
    </tr>
    <tr>
      <th>15</th>
      <td>PChome商店街-個人賣場</td>
      <td>15</td>
    </tr>
    <tr>
      <th>16</th>
      <td>商店街個人賣場網站</td>
      <td>14</td>
    </tr>
    <tr>
      <th>17</th>
      <td>蝦皮購物網站</td>
      <td>14</td>
    </tr>
    <tr>
      <th>18</th>
      <td>"PCHOME</td>
      <td>13</td>
    </tr>
    <tr>
      <th>19</th>
      <td>PCHOME個人賣場</td>
      <td>13</td>
    </tr>
    <tr>
      <th>20</th>
      <td>露天拍賣網</td>
      <td>12</td>
    </tr>
    <tr>
      <th>21</th>
      <td>吉隆有線電視股份有限公司</td>
      <td>11</td>
    </tr>
    <tr>
      <th>22</th>
      <td>Yahoo！奇摩拍賣</td>
      <td>11</td>
    </tr>
    <tr>
      <th>23</th>
      <td>旋轉拍賣</td>
      <td>10</td>
    </tr>
    <tr>
      <th>24</th>
      <td>Facebook</td>
      <td>9</td>
    </tr>
    <tr>
      <th>25</th>
      <td>Shopee蝦皮拍賣</td>
      <td>9</td>
    </tr>
    <tr>
      <th>26</th>
      <td>facebook</td>
      <td>8</td>
    </tr>
    <tr>
      <th>27</th>
      <td>雅虎拍賣</td>
      <td>8</td>
    </tr>
    <tr>
      <th>28</th>
      <td>康是美</td>
      <td>8</td>
    </tr>
    <tr>
      <th>29</th>
      <td>蝦皮拍賣網</td>
      <td>8</td>
    </tr>
    <tr>
      <th>30</th>
      <td>露天市集</td>
      <td>7</td>
    </tr>
    <tr>
      <th>31</th>
      <td>平安藥局</td>
      <td>7</td>
    </tr>
    <tr>
      <th>32</th>
      <td>壹週刊</td>
      <td>7</td>
    </tr>
    <tr>
      <th>33</th>
      <td>雅虎奇摩拍賣網站</td>
      <td>7</td>
    </tr>
    <tr>
      <th>34</th>
      <td>新台北有線電視股份有限公司</td>
      <td>6</td>
    </tr>
    <tr>
      <th>35</th>
      <td>PCHOME 商店街</td>
      <td>6</td>
    </tr>
    <tr>
      <th>36</th>
      <td>YAHOO！奇摩拍賣網</td>
      <td>6</td>
    </tr>
    <tr>
      <th>37</th>
      <td>Youtube</td>
      <td>6</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="filtered-by-one-of-by-isin">
<h3>5.3 Filtered by one-of by <code class="docutils literal notranslate"><span class="pre">.isin()</span></code><a class="headerlink" href="#filtered-by-one-of-by-isin" title="Permalink to this headline">#</a></h3>
<p><a class="reference external" href="https://www.geeksforgeeks.org/ways-to-filter-pandas-dataframe-by-column-values/">https://www.geeksforgeeks.org/ways-to-filter-pandas-dataframe-by-column-values/</a></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">options</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;蝦皮購物&#39;</span><span class="p">,</span> <span class="s1">&#39;露天拍賣&#39;</span><span class="p">]</span> 

<span class="n">media_count</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">media_count</span><span class="p">[</span><span class="s2">&quot;media&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">options</span><span class="p">)]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>media</th>
      <th>n</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>蝦皮購物</td>
      <td>523</td>
    </tr>
    <tr>
      <th>1</th>
      <td>露天拍賣</td>
      <td>443</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
</section>
<section id="p6-plotting">
<h2>P6. Plotting<a class="headerlink" href="#p6-plotting" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pat1</span> <span class="o">=</span> <span class="s1">&#39;代購|帶回&#39;</span>
<span class="n">pat2</span> <span class="o">=</span> <span class="s1">&#39;蝦皮|露天|拍賣|YAHOO|商店街&#39;</span>
<span class="n">filtered_drug_df</span> <span class="o">=</span> <span class="n">drug_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">drug_df</span><span class="p">[</span><span class="s1">&#39;違規產品名稱&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">pat</span><span class="o">=</span><span class="n">pat1</span><span class="p">,</span> <span class="n">na</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">&amp;</span> 
                               <span class="n">drug_df</span><span class="p">[</span><span class="s1">&#39;刊播媒體&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">pat</span><span class="o">=</span><span class="n">pat2</span><span class="p">,</span> <span class="n">na</span><span class="o">=</span><span class="kc">False</span><span class="p">)]</span>
<span class="n">filtered_drug_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>違規產品名稱</th>
      <th>違規廠商名稱或負責人</th>
      <th>處分機關</th>
      <th>處分日期</th>
      <th>處分法條</th>
      <th>違規情節</th>
      <th>刊播日期</th>
      <th>刊播媒體類別</th>
      <th>刊播媒體</th>
      <th>查處情形</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2</th>
      <td>✈日本 代購 參天製藥 處方簽點眼液</td>
      <td>蘇O涵/蘇O涵</td>
      <td>NaN</td>
      <td>01 25 2022 12:00AM</td>
      <td>NaN</td>
      <td>無照藥商</td>
      <td>08 27 2021 12:00AM</td>
      <td>網路</td>
      <td>蝦皮購物</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>✈日本 代購 TSUMURA 中將湯 24天包裝</td>
      <td>蘇O涵/蘇O涵</td>
      <td>NaN</td>
      <td>01 25 2022 12:00AM</td>
      <td>NaN</td>
      <td>無照藥商</td>
      <td>08 27 2021 12:00AM</td>
      <td>網路</td>
      <td>蝦皮購物</td>
      <td>輔導結案</td>
    </tr>
    <tr>
      <th>4</th>
      <td>_Salty.shop 日本代購 樂敦小花</td>
      <td>曾O嫺/曾O嫺</td>
      <td>NaN</td>
      <td>02 17 2022 12:00AM</td>
      <td>藥事法第27條</td>
      <td>無照藥商</td>
      <td>12 6 2021 12:00AM</td>
      <td>網路</td>
      <td>蝦皮購物</td>
      <td>處分結案</td>
    </tr>
    <tr>
      <th>9</th>
      <td>現貨正品 Eve 快速出貨 日本代購 白兔60 藍兔 40 eve 金兔 EVE 兔子 娃娃...</td>
      <td>張O恩/張O恩</td>
      <td>NaN</td>
      <td>03 4 2022 12:00AM</td>
      <td>NaN</td>
      <td>無照藥商</td>
      <td>12 21 2021 12:00AM</td>
      <td>網路</td>
      <td>蝦皮拍賣網站</td>
      <td>輔導結案</td>
    </tr>
    <tr>
      <th>18</th>
      <td>[海外代購]纈草根膠囊-120毫克-240粒-睡眠</td>
      <td>江O君/江O君</td>
      <td>NaN</td>
      <td>03 15 2022 12:00AM</td>
      <td>NaN</td>
      <td>無照藥商</td>
      <td>08 2 2021 12:00AM</td>
      <td>網路</td>
      <td>蝦皮購物</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2947</th>
      <td>「泰國代購🇹🇭」泰國🇹🇭Hirudoid強效去疤膏（預購）</td>
      <td>魏O芝/魏O芝</td>
      <td>NaN</td>
      <td>06 5 2020 12:00AM</td>
      <td>藥事法第27條</td>
      <td>無照藥商</td>
      <td>12 17 2019 12:00AM</td>
      <td>網路</td>
      <td>蝦皮購物</td>
      <td>處分結案</td>
    </tr>
    <tr>
      <th>2948</th>
      <td>eBuy美國代購美国正品GNC银杏叶精华提高增强记忆力预防老年痴呆补脑健脑</td>
      <td>蕭O雄/蕭O雄</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>無照藥商</td>
      <td>03 9 2020 12:00AM</td>
      <td>網路</td>
      <td>蝦皮購物</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2957</th>
      <td>【現貨】H&amp;H 久光 Hisamitsu酸痛舒緩貼布 120枚 140枚 痠痛 舒緩 貼布 ...</td>
      <td>胡OO/胡OO</td>
      <td>NaN</td>
      <td>07 16 2020 12:00AM</td>
      <td>藥事法第27條</td>
      <td>無照藥商</td>
      <td>02 27 2020 12:00AM</td>
      <td>網路</td>
      <td>蝦皮購物</td>
      <td>處分結案</td>
    </tr>
    <tr>
      <th>2965</th>
      <td>美國代購 ，9:5%折扣落建髮洗，兩款都有</td>
      <td>陳O鵬/陳O鵬</td>
      <td>NaN</td>
      <td>07 16 2020 12:00AM</td>
      <td>NaN</td>
      <td>藥品未申請查驗登記</td>
      <td>04 16 2020 12:00AM</td>
      <td>網路</td>
      <td>樂購蝦皮股份有限公司</td>
      <td>輔導結案</td>
    </tr>
    <tr>
      <th>2969</th>
      <td>日本帶回樂敦小花新鮮貨</td>
      <td>張O萍/張O萍</td>
      <td>NaN</td>
      <td>06 23 2020 12:00AM</td>
      <td>NaN</td>
      <td>難以判定產品屬性</td>
      <td>03 10 2020 12:00AM</td>
      <td>網路</td>
      <td>蝦皮購物</td>
      <td>輔導結案</td>
    </tr>
  </tbody>
</table>
<p>420 rows × 10 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">toplot</span> <span class="o">=</span> <span class="n">filtered_drug_df</span><span class="p">[</span><span class="s1">&#39;刊播媒體&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;n&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;index&quot;</span><span class="p">:</span> <span class="s2">&quot;media&quot;</span><span class="p">})</span>
</pre></div>
</div>
</div>
</div>
<section id="about-the-matplotlib-resolution">
<h3>6.1 About the matplotlib resolution<a class="headerlink" href="#about-the-matplotlib-resolution" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p>change font type: <code class="docutils literal notranslate"><span class="pre">matplotlib.rcParams['font.family']</span> <span class="pre">=</span> <span class="pre">['Heiti</span> <span class="pre">TC']</span></code></p></li>
<li><p><a class="reference external" href="https://stackoverflow.com/questions/39870642/matplotlib-how-to-plot-a-high-resolution-graph">https://stackoverflow.com/questions/39870642/matplotlib-how-to-plot-a-high-resolution-graph</a></p></li>
<li><p>Best result: <code class="docutils literal notranslate"><span class="pre">plt.savefig('filename.pdf')</span></code></p></li>
<li><p>To png: <code class="docutils literal notranslate"><span class="pre">plt.savefig('filename.png',</span> <span class="pre">dpi=300)</span></code></p></li>
</ul>
<p>Adjust resolution</p>
<ul class="simple">
<li><p>For saving the graph: <code class="docutils literal notranslate"><span class="pre">matplotlib.rcParams['savefig.dpi']</span> <span class="pre">=</span> <span class="pre">300</span></code></p></li>
<li><p>For displaying the graph when you use plt.show(): <code class="docutils literal notranslate"><span class="pre">matplotlib.rcParams[&quot;figure.dpi&quot;]</span> <span class="pre">=</span> <span class="pre">100</span></code></p></li>
</ul>
</section>
<section id="plot-with-chinese-font">
<h3>6.2 Plot with Chinese font<a class="headerlink" href="#plot-with-chinese-font" title="Permalink to this headline">#</a></h3>
<p><a class="reference external" href="https://colab.research.google.com/github/willismax/matplotlib_show_chinese_in_colab/blob/master/matplotlib_show_chinese_in_colab.ipynb">https://colab.research.google.com/github/willismax/matplotlib_show_chinese_in_colab/blob/master/matplotlib_show_chinese_in_colab.ipynb</a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span># Colab 進行matplotlib繪圖時顯示繁體中文
# 下載台北思源黑體並命名taipei_sans_tc_beta.ttf，移至指定路徑
!wget -O TaipeiSansTCBeta-Regular.ttf https://drive.google.com/uc?id=1eGAsTN1HBpJAkeVM57_C7ccp7hbgSz3_&amp;export=download

import matplotlib as mpl
import matplotlib.pyplot as plt 
from matplotlib.font_manager import fontManager

# 改style要在改font之前
# plt.style.use(&#39;seaborn&#39;)  

fontManager.addfont(&#39;TaipeiSansTCBeta-Regular.ttf&#39;)
mpl.rc(&#39;font&#39;, family=&#39;Taipei Sans TC Beta&#39;)
</pre></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib</span>
<span class="n">matplotlib</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;figure.dpi&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">150</span>
<span class="n">matplotlib</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;font.family&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Heiti TC&#39;</span><span class="p">]</span>

<span class="n">toplot</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">barh</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">&quot;media&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">invert_yaxis</span><span class="p">()</span>

<span class="c1"># plt.show()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/3f1766f2ab4652a5fcc13edfb0678156f26aee08a3a532354490cc09afaa1de4.png" src="../_images/3f1766f2ab4652a5fcc13edfb0678156f26aee08a3a532354490cc09afaa1de4.png" />
</div>
</div>
</section>
</section>
<section id="p7-pivot-groupby-and-summarize">
<h2>P7. Pivot: groupby and summarize<a class="headerlink" href="#p7-pivot-groupby-and-summarize" title="Permalink to this headline">#</a></h2>
<p><a class="reference external" href="https://pandas.pydata.org/docs/user_guide/reshaping.html">Reshaping and pivot tables — pandas 1.4.2 documentation (pydata.org)</a></p>
<section id="multiple-factors-to-one-new-column">
<h3>7.1 Multiple factors to one new column<a class="headerlink" href="#multiple-factors-to-one-new-column" title="Permalink to this headline">#</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">count</span> <span class="o">=</span> <span class="n">raw</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s2">&quot;authorDisplayName&quot;</span><span class="p">,</span> <span class="s2">&quot;isSimplified2&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Time&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="one-column-summarized-to-multiple-columns">
<h3>7.2 One column summarized to multiple columns<a class="headerlink" href="#one-column-summarized-to-multiple-columns" title="Permalink to this headline">#</a></h3>
<p><a class="reference external" href="https://stackoverflow.com/questions/14529838/apply-multiple-functions-to-multiple-groupby-columns/53096340">https://stackoverflow.com/questions/14529838/apply-multiple-functions-to-multiple-groupby-columns/53096340</a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span>
    <span class="n">animals</span>
    <span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;kind&#39;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">height</span>
    <span class="o">.</span><span class="n">agg</span><span class="p">(</span>
        <span class="n">min_height</span><span class="o">=</span><span class="s1">&#39;min&#39;</span><span class="p">,</span>
        <span class="n">max_height</span><span class="o">=</span><span class="s1">&#39;max&#39;</span><span class="p">,</span>
    <span class="p">)</span>
<span class="p">)</span>
<span class="c1">#       min_height  max_height</span>
<span class="c1"># kind                        </span>
<span class="c1"># cat          9.1         9.5</span>
<span class="c1"># dog          6.0        34.0</span>
</pre></div>
</div>
<hr class="docutils" />
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span>
    <span class="n">animals</span>
    <span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;kind&#39;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">agg</span><span class="p">(</span>
        <span class="n">min_height</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;height&#39;</span><span class="p">,</span> <span class="s1">&#39;min&#39;</span><span class="p">),</span>
        <span class="n">max_height</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;height&#39;</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">),</span>
        <span class="n">average_weight</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;weight&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">),</span>
    <span class="p">)</span>
<span class="p">)</span>
<span class="c1">#       min_height  max_height  average_weight</span>
<span class="c1"># kind                                        </span>
<span class="c1"># cat          9.1         9.5            8.90</span>
<span class="c1"># dog          6.0        34.0          102.75</span>
</pre></div>
</div>
</section>
<section id="multiple-columns-to-multiple-columns-with-different-functions">
<h3>7.3 Multiple columns to multiple columns with different functions<a class="headerlink" href="#multiple-columns-to-multiple-columns-with-different-functions" title="Permalink to this headline">#</a></h3>
<p><a class="reference external" href="https://stackoverflow.com/questions/14529838/apply-multiple-functions-to-multiple-groupby-columns/53096340">https://stackoverflow.com/questions/14529838/apply-multiple-functions-to-multiple-groupby-columns/53096340</a></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;abcd&#39;</span><span class="p">))</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;group&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="n">df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>a</th>
      <th>b</th>
      <th>c</th>
      <th>d</th>
      <th>group</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.665049</td>
      <td>0.541810</td>
      <td>0.451648</td>
      <td>0.896288</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.575938</td>
      <td>0.545449</td>
      <td>0.991410</td>
      <td>0.822755</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.798557</td>
      <td>0.616866</td>
      <td>0.267948</td>
      <td>0.819010</td>
      <td>1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.532333</td>
      <td>0.890252</td>
      <td>0.566499</td>
      <td>0.702033</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;group&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:[</span><span class="s1">&#39;sum&#39;</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">],</span> 
                         <span class="s1">&#39;b&#39;</span><span class="p">:</span><span class="s1">&#39;mean&#39;</span><span class="p">,</span> 
                         <span class="s1">&#39;c&#39;</span><span class="p">:</span><span class="s1">&#39;sum&#39;</span><span class="p">,</span> 
                         <span class="s1">&#39;d&#39;</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">-</span> <span class="n">x</span><span class="o">.</span><span class="n">min</span><span class="p">()})</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead tr th {
        text-align: left;
    }

    .dataframe thead tr:last-of-type th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th colspan="2" halign="left">a</th>
      <th>b</th>
      <th>c</th>
      <th>d</th>
    </tr>
    <tr>
      <th></th>
      <th>sum</th>
      <th>max</th>
      <th>mean</th>
      <th>sum</th>
      <th>&lt;lambda&gt;</th>
    </tr>
    <tr>
      <th>group</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1.240987</td>
      <td>0.665049</td>
      <td>0.543629</td>
      <td>1.443058</td>
      <td>0.073533</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1.330889</td>
      <td>0.798557</td>
      <td>0.753559</td>
      <td>0.834448</td>
      <td>0.116977</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./PSS"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="P06p1_summarizing.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Pandas: Counting and Summarizing</p>
      </div>
    </a>
    <a class="right-next"
       href="P06p3_timestamp.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">P06-3 Processing timestamp</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> 目錄
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#p1-load-data-twitter-account">P1. Load data (twitter account)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#drop-columns">1.1 Drop columns</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#p2-tweets-over-time">P2. Tweets over time</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#convert-str-to-datetime">2.1 Convert str to datetime</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#p3-iterate-each-row-of-dataframe">P3. Iterate each row of dataframe</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#plotting">3.1 Plotting</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#p4-twitter-user-productivity">P4. Twitter User Productivity</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#p5-filter-rows-by-column-value-very-important">P5. Filter rows by column value (Very Important)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#load-data-drug-ill-ad">Load data (drug ill-ad)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#detecting-patterns-in-strings-by-str-contains">5.1  Detecting patterns in strings by <code class="docutils literal notranslate"><span class="pre">str.contains()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#filtered-by-arithemetic-comparison">5.2 Filtered by arithemetic comparison</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#filtered-by-one-of-by-isin">5.3 Filtered by one-of by <code class="docutils literal notranslate"><span class="pre">.isin()</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#p6-plotting">P6. Plotting</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#about-the-matplotlib-resolution">6.1 About the matplotlib resolution</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#plot-with-chinese-font">6.2 Plot with Chinese font</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#p7-pivot-groupby-and-summarize">P7. Pivot: groupby and summarize</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#multiple-factors-to-one-new-column">7.1 Multiple factors to one new column</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#one-column-summarized-to-multiple-columns">7.2 One column summarized to multiple columns</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#multiple-columns-to-multiple-columns-with-different-functions">7.3 Multiple columns to multiple columns with different functions</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
作者： JILUNG
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>